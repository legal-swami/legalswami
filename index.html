<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LegalSwami | AI-Powered Legal Assistant & Document Generator</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- jsPDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚖️</text></svg>">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#0f172a">
    
    <!-- Apple Mobile Web App Capable -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="LegalSwami - AI Legal Assistant">
    <meta property="og:description" content="Get instant legal advice, generate documents, and understand laws with AI">
    
    <!-- Google Client ID -->
    <meta name="google-client-id" 
          content="166511615962-bohur5q8d4i5hud6icr4185kcte9enk8.apps.googleusercontent.com">
    
    <style>
/* ============================================= */
/* LEGALSWAMI - COMPLETE PROFESSIONAL LEGAL UI */
/* ============================================= */

:root {
    /* Courtroom Color Scheme */
    --court-dark-blue: #1a365d;
    --court-blue: #2d3748;
    --court-gold: #d4af37;
    --court-maroon: #8b0000;
    --court-ivory: #fffff0;
    --court-parchment: #f5f5dc;
    --court-mahogany: #420d09;
    
    /* Legal Professional Colors */
    --primary: #1e40af;
    --primary-dark: #1e3a8a;
    --primary-light: #3b82f6;
    --secondary: #7c3aed;
    --accent: #dc2626;
    --success: #059669;
    --warning: #d97706;
    --error: #dc2626;
    --info: #0ea5e9;
    
    /* Dark Mode */
    --dark-bg: #0f172a;
    --dark-surface: #1e293b;
    --dark-surface-light: #334155;
    --dark-border: #475569;
    --dark-text: #f1f5f9;
    --dark-text-secondary: #94a3b8;
    --dark-text-tertiary: #64748b;
}

/* ============================================= */
/* RESET & BASE STYLES */
/* ============================================= */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    background: var(--dark-bg);
    color: var(--dark-text);
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
    transition: background 0.3s ease;
}

/* ============================================= */
/* COURTROOM TYPOGRAPHY */
/* ============================================= */

.legal-heading {
    font-family: 'Playfair Display', serif;
    font-weight: 600;
    letter-spacing: -0.025em;
}

.legal-subheading {
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    letter-spacing: 0.025em;
    text-transform: uppercase;
    color: var(--court-gold);
}

.legal-body {
    font-family: 'Inter', sans-serif;
    font-size: 1rem;
    line-height: 1.75;
}

.legal-caption {
    font-size: 0.875rem;
    color: var(--dark-text-secondary);
    font-style: italic;
}

/* ============================================= */
/* MAIN CONTAINERS */
/* ============================================= */

.main-container {
    display: block;
    width: 100%;
    min-height: 100vh;
    transition: opacity 0.3s ease;
}

.container {
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
}

/* ============================================= */
/* PREMIUM NAVIGATION - LEGAL STYLE */
/* ============================================= */

.premium-navbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(15, 23, 42, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 2px solid var(--court-gold);
    z-index: 1000;
    height: 70px;
}

.nav-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.nav-logo {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
}

.logo-icon {
    width: 42px;
    height: 42px;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
    position: relative;
    overflow: hidden;
}

.logo-icon::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
}

.logo-text {
    display: flex;
    flex-direction: column;
}

.logo-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--primary-light) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.logo-subtitle {
    font-size: 0.75rem;
    color: var(--dark-text-secondary);
    letter-spacing: 0.1em;
    text-transform: uppercase;
}

.nav-menu {
    display: flex;
    gap: 2rem;
    align-items: center;
}

.nav-link {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--dark-text-secondary);
    text-decoration: none;
    font-weight: 500;
    padding: 0.5rem 0;
    position: relative;
    transition: color 0.3s;
    font-size: 0.9375rem;
}

.nav-link i {
    font-size: 1rem;
}

.nav-link:hover {
    color: var(--court-gold);
}

.nav-link.active {
    color: var(--court-gold);
}

.nav-link.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--court-gold);
    border-radius: 1px;
}

.nav-actions {
    display: flex;
    gap: 12px;
    align-items: center;
}

/* Google Login Button */
.google-login-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    background: white;
    color: #5f6368;
    border: 1px solid #dadce0;
    border-radius: 8px;
    padding: 8px 16px;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
}

.google-login-btn:hover {
    background: #f8f9fa;
    box-shadow: 0 1px 3px rgba(60,64,67,0.3);
    transform: translateY(-1px);
}

.google-login-btn i {
    color: #4285f4;
    font-size: 1rem;
}

.mobile-toggle {
    display: none;
    background: none;
    border: none;
    color: var(--dark-text);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 4px;
    transition: background-color 0.3s;
}

.mobile-toggle:hover {
    background: var(--dark-surface);
}

/* ============================================= */
/* CHAT INTERFACE - PROFESSIONAL LEGAL STYLE */
/* ============================================= */

#chatInterface {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: var(--dark-bg);
    z-index: 9999;
    display: none;
    flex-direction: column;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s;
    overflow: hidden;
}

#chatInterface.active {
    display: flex;
    visibility: visible;
    opacity: 1;
}

#chatInterface .container {
    height: 100vh;
    padding: 0;
    background: var(--dark-bg);
}

#chatInterface .chat-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100%;
    background: var(--dark-bg);
    position: relative;
}

/* Chat Header - Legal Court Style */
#chatInterface header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 1rem;
    background: linear-gradient(135deg, var(--court-dark-blue) 0%, var(--court-blue) 100%);
    border-bottom: 3px solid var(--court-gold);
    height: 70px;
    flex-shrink: 0;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
}

#chatInterface header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, 
        var(--court-gold) 0%, 
        var(--court-maroon) 50%, 
        var(--court-gold) 100%);
}

#chatInterface .logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

#chatInterface .logo-icon {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--primary) 100%);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1rem;
    position: relative;
    overflow: hidden;
}

#chatInterface .logo-icon::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
}

#chatInterface .logo h1 {
    font-family: 'Playfair Display', serif;
    font-size: 1.25rem;
    font-weight: 600;
    background: linear-gradient(135deg, #fff 0%, var(--court-gold) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

#chatInterface .header-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

.header-btn {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    padding: 0.5rem 0.875rem;
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
    min-height: 36px;
    backdrop-filter: blur(10px);
}

.header-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
    border-color: var(--court-gold);
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0.5rem 0.875rem;
    background: rgba(16, 185, 129, 0.15);
    border: 1px solid rgba(16, 185, 129, 0.3);
    border-radius: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #10b981;
    backdrop-filter: blur(10px);
}

.status-dot {
    width: 8px;
    height: 8px;
    background-color: #10b981;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
    }
    50% { 
        opacity: 0.7; 
        box-shadow: 0 0 0 8px rgba(16, 185, 129, 0);
    }
}

/* Chat Main Content - Courtroom Layout */
#chatInterface .main-content {
    display: flex;
    flex: 1;
    height: calc(100vh - 70px);
    background: var(--dark-surface);
    overflow: hidden;
    position: relative;
    margin-top: 70px; /* Offset for fixed header */
}

/* Chat Sidebar - Case File Style */
#chatInterface .sidebar {
    width: 280px;
    background: linear-gradient(180deg, var(--court-dark-blue) 0%, var(--dark-surface) 100%);
    border-right: 2px solid var(--court-gold);
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
    position: relative;
    z-index: 90;
    height: 100%;
    overflow: hidden;
    box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
}

#chatInterface .sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23d4af37' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
    opacity: 0.3;
    pointer-events: none;
}

#chatInterface .sidebar-tabs {
    display: flex;
    border-bottom: 2px solid var(--court-gold);
    background: var(--court-dark-blue);
    height: 55px;
    flex-shrink: 0;
}

.sidebar-tab {
    flex: 1;
    padding: 1rem 0.5rem;
    background: transparent;
    border: none;
    color: var(--dark-text-secondary);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.sidebar-tab::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--court-gold);
    transform: translateY(-100%);
    transition: transform 0.3s;
}

.sidebar-tab:hover {
    color: var(--court-gold);
    background: rgba(212, 175, 55, 0.1);
}

.sidebar-tab.active {
    color: var(--court-gold);
    background: rgba(212, 175, 55, 0.15);
}

.sidebar-tab.active::before {
    transform: translateY(0);
}

.tab-content {
    flex: 1;
    overflow-y: auto;
    display: none;
    height: calc(100% - 55px);
}

.tab-content.active {
    display: flex;
    flex-direction: column;
}

/* Chat Messages Area - Court Transcript Style */
#chatInterface .chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    background: var(--dark-surface);
    position: relative;
    z-index: 10;
    min-height: 0;
    height: calc(100% - 80px);
}

#chatMessages {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    padding-right: 15px; /* Space for scrollbar */
    padding-bottom: 1rem;
    max-height: 100%;
    scrollbar-gutter: stable;
}

/* FIXED: Proper scrollbar for chat */
#chatMessages::-webkit-scrollbar {
    width: 8px;
    position: absolute;
    right: 0;
}

#chatMessages::-webkit-scrollbar-track {
    background: transparent;
    margin: 10px 0;
}

#chatMessages::-webkit-scrollbar-thumb {
    background: var(--court-gold);
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: content-box;
}

#chatMessages::-webkit-scrollbar-thumb:hover {
    background: var(--court-maroon);
    background-clip: content-box;
}

.message {
    display: flex;
    gap: 1rem;
    max-width: 100%;
    padding: 1.25rem;
    animation: fadeIn 0.4s ease;
    border-radius: 12px;
    position: relative;
    backdrop-filter: blur(10px);
}

@keyframes fadeIn {
    from { 
        opacity: 0; 
        transform: translateY(20px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

.user-message {
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.15) 0%, rgba(30, 64, 175, 0.3) 100%);
    border: 1px solid rgba(30, 64, 175, 0.3);
    margin-left: 3rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.ai-message {
    background: linear-gradient(135deg, rgba(30, 41, 59, 0.15) 0%, rgba(30, 41, 59, 0.3) 100%);
    border: 1px solid rgba(212, 175, 55, 0.2);
    margin-right: 3rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.ai-message::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    border-radius: 12px 0 0 12px;
}

.avatar {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    flex-shrink: 0;
    margin-top: 4px;
    position: relative;
    overflow: hidden;
}

.user-message .avatar {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
}

.ai-message .avatar {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
}

.avatar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.4) 0%, transparent 70%);
}

.message-content {
    flex: 1;
    position: relative;
    min-width: 0;
}

.message-text {
    padding: 0;
    border-radius: 0;
    font-size: 0.9375rem;
    line-height: 1.7;
    word-wrap: break-word;
    overflow-wrap: break-word;
    color: var(--dark-text);
}

.user-message .message-text {
    color: var(--dark-text);
}

.ai-message .message-text {
    color: var(--dark-text);
}

.ai-message .message-text strong {
    color: var(--court-gold);
}

.ai-message .message-text code {
    background: rgba(0, 0, 0, 0.2);
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
}

.ai-message .message-text ul,
.ai-message .message-text ol {
    margin: 0.75rem 0;
    padding-left: 1.5rem;
}

.ai-message .message-text li {
    margin-bottom: 0.5rem;
}

/* Welcome Message - Court Notice Style */
.welcome-message {
    text-align: center;
    max-width: 700px;
    margin: 2rem auto;
    padding: 2rem;
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, rgba(212, 175, 55, 0.1) 100%);
    border: 2px solid var(--court-gold);
    border-radius: 16px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.welcome-message::before {
    content: '⚖️';
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 4rem;
    opacity: 0.1;
}

.welcome-message h2 {
    font-family: 'Playfair Display', serif;
    font-size: 2rem;
    margin-bottom: 1rem;
    color: var(--court-gold);
    position: relative;
}

.welcome-message p {
    margin-bottom: 1rem;
    color: var(--dark-text-secondary);
    font-size: 1rem;
    line-height: 1.6;
}

.welcome-message .legal-notice {
    background: rgba(212, 175, 55, 0.1);
    border: 1px solid var(--court-gold);
    border-radius: 8px;
    padding: 1rem;
    margin: 1.5rem 0;
    text-align: left;
}

.welcome-message .legal-notice h4 {
    color: var(--court-gold);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 8px;
}

.draft-templates {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-top: 2rem;
}

.draft-template {
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(30, 64, 175, 0.1) 100%);
    padding: 1.25rem;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s;
    border: 1px solid var(--dark-border);
    text-align: left;
    position: relative;
    overflow: hidden;
}

.draft-template:hover {
    background: linear-gradient(135deg, var(--dark-surface-light) 0%, rgba(30, 64, 175, 0.2) 100%);
    transform: translateY(-3px);
    border-color: var(--court-gold);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.draft-template i {
    font-size: 1.5rem;
    color: var(--court-gold);
    margin-bottom: 0.75rem;
}

.draft-template h4 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    color: var(--dark-text);
}

.draft-template p {
    font-size: 0.8125rem;
    color: var(--dark-text-secondary);
    margin: 0;
}

.welcome-features {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-top: 2rem;
}

.welcome-features .feature {
    text-align: center;
    padding: 1.5rem;
    background: var(--dark-surface);
    border-radius: 12px;
    border: 1px solid var(--dark-border);
    transition: all 0.3s;
}

.welcome-features .feature:hover {
    transform: translateY(-3px);
    border-color: var(--court-gold);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
}

.welcome-features .feature i {
    font-size: 2rem;
    color: var(--court-gold);
    margin-bottom: 1rem;
}

.welcome-features .feature h4 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    color: var(--dark-text);
}

.welcome-features .feature p {
    font-size: 0.8125rem;
    color: var(--dark-text-secondary);
    margin: 0;
    line-height: 1.5;
}

/* FIXED: Chat Input Area */
.input-container {
    padding: 1rem;
    background: linear-gradient(180deg, var(--dark-surface) 0%, var(--dark-bg) 100%);
    border-top: 2px solid var(--court-gold);
    flex-shrink: 0;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 100;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.2);
}

.input-area {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    width: 100%;
}

.input-area textarea {
    width: 100%;
    padding: 1rem 7rem 1rem 1.25rem;
    background: linear-gradient(135deg, var(--court-parchment) 0%, var(--dark-surface) 100%);
    border: 2px solid var(--court-gold);
    border-radius: 12px;
    color: var(--dark-text) !important;
    font-size: 0.9375rem;
    resize: none;
    min-height: 56px;
    max-height: 200px;
    transition: all 0.3s;
    line-height: 1.5;
    font-family: inherit;
    outline: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    opacity: 1 !important;
    visibility: visible !important;
    caret-color: var(--court-gold);
}

.input-area textarea:focus {
    border-color: var(--primary-light);
    box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.3);
    background: linear-gradient(135deg, var(--court-parchment) 0%, var(--dark-surface-light) 100%);
}

.input-area textarea::placeholder {
    color: var(--dark-text-secondary) !important;
    opacity: 0.8 !important;
}

.input-buttons {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: 8px;
}

.attachment-btn,
.input-microphone-btn,
.send-button {
    background: rgba(30, 64, 175, 0.1);
    border: 1px solid rgba(30, 64, 175, 0.3);
    color: var(--dark-text);
    cursor: pointer;
    padding: 8px;
    border-radius: 8px;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}

.attachment-btn:hover,
.input-microphone-btn:hover {
    background: rgba(30, 64, 175, 0.2);
    border-color: var(--court-gold);
    transform: translateY(-1px);
}

.send-button {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    padding: 8px 20px;
    font-weight: 600;
    border: none;
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
}

.send-button:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
}

.send-button:disabled {
    background: var(--dark-border);
    cursor: not-allowed;
    opacity: 0.5;
    transform: none !important;
    box-shadow: none !important;
}

/* FIXED: Message Action Buttons - Always visible */
.message-actions {
    display: flex;
    gap: 0.75rem;
    margin-top: 1rem;
    flex-wrap: wrap;
}

.action-btn {
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, transparent 100%);
    color: var(--dark-text-secondary);
    border: 1px solid rgba(30, 64, 175, 0.2);
    border-radius: 8px;
    padding: 0.5rem 0.875rem;
    cursor: pointer;
    font-size: 0.8125rem;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 6px;
    min-height: 36px;
    font-weight: 500;
    backdrop-filter: blur(10px);
}

.action-btn:hover {
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.2) 0%, transparent 100%);
    border-color: var(--court-gold);
    transform: translateY(-1px);
}

.action-btn.copy:hover {
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.3) 0%, rgba(30, 64, 175, 0.6) 100%);
    color: white;
}

.action-btn.edit:hover {
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(212, 175, 55, 0.6) 100%);
    color: white;
}

.action-btn.regenerate:hover {
    background: linear-gradient(135deg, rgba(5, 150, 105, 0.3) 0%, rgba(5, 150, 105, 0.6) 100%);
    color: white;
}

.action-btn.like.active,
.action-btn.dislike.active {
    background: linear-gradient(135deg, rgba(5, 150, 105, 0.3) 0%, rgba(5, 150, 105, 0.6) 100%);
    color: white;
}

.action-btn.dislike:hover {
    background: linear-gradient(135deg, rgba(220, 38, 38, 0.3) 0%, rgba(220, 38, 38, 0.6) 100%);
    color: white;
}

.action-btn.share:hover {
    background: linear-gradient(135deg, rgba(14, 165, 233, 0.3) 0%, rgba(14, 165, 233, 0.6) 100%);
    color: white;
}

.action-btn.download:hover {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.3) 0%, rgba(139, 0, 0, 0.6) 100%);
    color: white;
}

/* FIXED: Stop button for AI responses */
.stop-button {
    background: linear-gradient(135deg, var(--error) 0%, #b91c1c 100%);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 0.5rem 0.875rem;
    font-size: 0.8125rem;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    min-height: 36px;
    margin-top: 1rem;
    backdrop-filter: blur(10px);
    transition: all 0.3s;
}

.stop-button:hover {
    background: linear-gradient(135deg, #b91c1c 0%, var(--error) 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
}

/* Dropdown Menu for Download */
.download-dropdown {
    position: relative;
    display: inline-block;
}

.download-options-menu {
    display: none;
    position: absolute;
    bottom: 100%;
    left: 0;
    background: var(--dark-surface);
    border: 1px solid var(--court-gold);
    border-radius: 8px;
    padding: 0.5rem;
    min-width: 150px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    z-index: 100;
}

.download-options-menu.show {
    display: block;
}

.download-option-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 0.5rem 0.75rem;
    background: transparent;
    border: none;
    color: var(--dark-text);
    cursor: pointer;
    border-radius: 4px;
    transition: all 0.3s;
    font-size: 0.8125rem;
}

.download-option-btn:hover {
    background: rgba(212, 175, 55, 0.1);
}

/* ============================================= */
/* MOBILE OPTIMIZATIONS */
/* ============================================= */

@media (max-width: 768px) {
    #chatInterface header {
        padding: 0 0.75rem;
        height: 60px;
    }
    
    #chatInterface .main-content {
        margin-top: 60px;
        height: calc(100vh - 60px);
    }
    
    .input-container {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 0.75rem;
        background: linear-gradient(180deg, var(--dark-surface) 0%, var(--dark-bg) 100%);
        border-top: 2px solid var(--court-gold);
        z-index: 100;
        height: auto;
        min-height: 70px;
    }
    
    #chatMessages {
        padding: 1rem 0.75rem;
        margin-bottom: 70px;
        height: calc(100vh - 130px);
    }
    
    .chat-messages {
        height: calc(100vh - 130px);
        overflow-y: auto;
    }
    
    .message {
        padding: 1rem;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    .message-actions {
        gap: 0.5rem;
    }
    
    .action-btn {
        padding: 0.4rem 0.6rem;
        font-size: 0.75rem;
    }
    
    .action-btn span {
        display: none;
    }
    
    .action-btn i {
        margin: 0;
    }
    
    .input-area textarea {
        padding-right: 5.5rem;
        font-size: 0.875rem;
        min-height: 50px;
    }
    
    .input-buttons {
        right: 8px;
    }
    
    .attachment-btn,
    .input-microphone-btn,
    .send-button {
        padding: 6px;
        width: 32px;
        height: 32px;
    }
    
    .send-button span {
        display: none;
    }
    
    @media (min-width: 480px) {
        .action-btn span {
            display: inline;
        }
        
        .action-btn {
            padding: 0.4rem 0.75rem;
            font-size: 0.75rem;
        }
        
        .send-button span {
            display: inline;
            margin-left: 4px;
        }
        
        .send-button {
            padding: 6px 12px;
            width: auto;
        }
    }
}

/* ============================================= */
/* LEGAL TOPICS & HISTORY */
/* ============================================= */

#legal-topics-content {
    padding: 1.5rem;
    overflow-y: auto;
}

#legal-topics-content .sidebar-header {
    padding: 0 0 1.5rem 0;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid var(--dark-border);
}

#legal-topics-content .sidebar-header h2 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.125rem;
    color: var(--court-gold);
}

.topic-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.topic-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 1rem;
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, transparent 100%);
    border: 1px solid rgba(30, 64, 175, 0.2);
    border-radius: 10px;
    color: var(--dark-text);
    cursor: pointer;
    transition: all 0.3s;
    text-align: left;
    font-size: 0.875rem;
    position: relative;
    overflow: hidden;
}

.topic-item:hover {
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.2) 0%, transparent 100%);
    border-color: var(--court-gold);
    transform: translateX(5px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.topic-item i {
    color: var(--court-gold);
    width: 24px;
    font-size: 1rem;
}

.topic-item .topic-badge {
    margin-left: auto;
    background: rgba(212, 175, 55, 0.2);
    color: var(--court-gold);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
}

/* History List */
.history-list {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.history-item {
    padding: 1rem;
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, transparent 100%);
    border: 1px solid rgba(30, 64, 175, 0.2);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.history-item:hover {
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.2) 0%, transparent 100%);
    border-color: var(--court-gold);
    transform: translateX(3px);
}

.history-item.active {
    border-color: var(--court-gold);
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, transparent 100%);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.1);
}

.history-title {
    font-size: 0.9375rem;
    font-weight: 600;
    margin-bottom: 0.375rem;
    color: var(--dark-text);
}

.history-preview {
    font-size: 0.8125rem;
    color: var(--dark-text-secondary);
    margin-bottom: 0.375rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.history-date {
    font-size: 0.75rem;
    color: var(--dark-text-tertiary);
    display: flex;
    align-items: center;
    gap: 4px;
}

.history-actions {
    display: flex;
    gap: 8px;
    margin-top: 8px;
}

.history-action-btn {
    flex: 1;
    padding: 6px 12px;
    border-radius: 6px;
    border: none;
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.history-action-btn.open {
    background: rgba(30, 64, 175, 0.2);
    color: var(--primary-light);
    border: 1px solid rgba(30, 64, 175, 0.3);
}

.history-action-btn.open:hover {
    background: rgba(30, 64, 175, 0.3);
}

.history-action-btn.delete {
    background: rgba(220, 38, 38, 0.2);
    color: var(--error);
    border: 1px solid rgba(220, 38, 38, 0.3);
}

.history-action-btn.delete:hover {
    background: rgba(220, 38, 38, 0.3);
}

/* New Chat Button UI */
.history-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--dark-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
}

.history-header h2 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.125rem;
    color: var(--court-gold);
    margin: 0;
}

.new-chat-btn {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 8px 16px;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s;
    white-space: nowrap;
}

.new-chat-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
}

.empty-history {
    text-align: center;
    padding: 3rem 1.5rem;
    color: var(--dark-text-secondary);
}

.empty-history i {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: var(--dark-border);
    opacity: 0.5;
}

/* ============================================= */
/* SCROLL TO BOTTOM BUTTON */
/* ============================================= */

.scroll-to-bottom-btn {
    position: absolute;
    bottom: 100px;
    right: 30px;
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    border: 2px solid var(--court-gold);
    border-radius: 50%;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    z-index: 900;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    opacity: 0;
    transform: translateY(20px) scale(0.9);
    backdrop-filter: blur(10px);
}

.scroll-to-bottom-btn.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
}

.scroll-to-bottom-btn:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
}

/* ============================================= */
/* HERO SECTION - LEGAL PROFESSIONAL */
/* ============================================= */

.hero-section {
    padding-top: 100px;
    min-height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
}

.hero-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
    position: relative;
    z-index: 2;
}

.hero-bg-elements {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    opacity: 0.1;
}

.floating-element {
    position: absolute;
    font-size: 3rem;
    color: var(--court-gold);
    opacity: 0.3;
    animation: float 6s ease-in-out infinite;
}

.floating-element:nth-child(2) {
    animation-delay: -2s;
}

.floating-element:nth-child(3) {
    animation-delay: -4s;
}

@keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-30px) rotate(10deg); }
}

.hero-content {
    z-index: 1;
}

.hero-badge {
    display: inline-block;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    padding: 0.75rem 1.5rem;
    border-radius: 30px;
    margin-bottom: 2rem;
    border: 2px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
}

.badge-text {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.875rem;
    font-weight: 600;
    color: white;
    letter-spacing: 0.05em;
}

.hero-title {
    font-family: 'Playfair Display', serif;
    font-size: 3.75rem;
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #ffffff 0%, var(--court-gold) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero-subtitle {
    font-size: 1.25rem;
    color: var(--dark-text-secondary);
    margin-bottom: 2.5rem;
    line-height: 1.7;
    max-width: 600px;
}

.hero-stats {
    display: flex;
    gap: 3rem;
    margin-bottom: 3rem;
    flex-wrap: wrap;
}

.stat-item {
    text-align: left;
}

.stat-number {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--primary-light) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.stat-label {
    font-size: 0.9375rem;
    color: var(--dark-text-secondary);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.hero-actions {
    display: flex;
    gap: 1.25rem;
    margin-bottom: 3rem;
    flex-wrap: wrap;
}

.btn-hero-primary {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1.25rem 2.5rem;
    font-size: 1.125rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
}

.btn-hero-primary::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.btn-hero-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(212, 175, 55, 0.4);
}

.btn-hero-primary:hover::after {
    left: 100%;
}

.btn-hero-secondary {
    background: transparent;
    color: var(--dark-text);
    border: 2px solid var(--court-gold);
    border-radius: 12px;
    padding: 1.25rem 2.5rem;
    font-size: 1.125rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.3s;
    backdrop-filter: blur(10px);
}

.btn-hero-secondary:hover {
    background: rgba(212, 175, 55, 0.1);
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
}

.hero-trust {
    margin-top: 3rem;
}

.trust-label {
    font-size: 0.9375rem;
    color: var(--dark-text-secondary);
    margin-bottom: 1.25rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.trust-badges {
    display: flex;
    gap: 1.25rem;
    flex-wrap: wrap;
}

.trust-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0.75rem 1.25rem;
    background: rgba(30, 64, 175, 0.1);
    border-radius: 10px;
    border: 1px solid rgba(30, 64, 175, 0.2);
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.3s;
}

.trust-badge:hover {
    background: rgba(30, 64, 175, 0.2);
    transform: translateY(-2px);
    border-color: var(--court-gold);
}

.trust-badge i {
    color: var(--court-gold);
}

.hero-illustration {
    position: relative;
    z-index: 1;
}

.ai-assistant-card {
    background: linear-gradient(135deg, var(--dark-surface) 0%, var(--court-dark-blue) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    border: 2px solid var(--court-gold);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    text-align: center;
    position: relative;
    overflow: hidden;
}

.ai-assistant-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
}

.assistant-avatar {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2.5rem;
    margin: 0 auto 1.5rem;
    border: 4px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px rgba(212, 175, 55, 0.3);
    position: relative;
    overflow: hidden;
}

.assistant-avatar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
}

.assistant-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.75rem;
    margin-bottom: 0.75rem;
    color: var(--court-gold);
}

.assistant-subtitle {
    color: var(--dark-text-secondary);
    margin-bottom: 2rem;
    font-size: 1.125rem;
}

.assistant-features {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
}

.feature {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 1rem;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    transition: all 0.3s;
}

.feature:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateX(5px);
}

.feature i {
    color: var(--court-gold);
    font-size: 1.25rem;
}

.btn-assistant {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1rem 2rem;
    font-size: 1.125rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    justify-content: center;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.btn-assistant:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
}

.scroll-indicator {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    z-index: 10;
}

.mouse {
    width: 34px;
    height: 56px;
    border: 2px solid var(--court-gold);
    border-radius: 20px;
    position: relative;
    margin: 0 auto;
}

.wheel {
    width: 6px;
    height: 12px;
    background: var(--court-gold);
    border-radius: 3px;
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    animation: scroll 2s infinite;
}

@keyframes scroll {
    0% { top: 10px; opacity: 1; }
    100% { top: 30px; opacity: 0; }
}

.arrow {
    margin-top: 1rem;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-15px); }
    60% { transform: translateY(-7px); }
}

/* ============================================= */
/* SECTIONS - LEGAL DOCUMENT STYLE */
/* ============================================= */

.features-section,
.database-section,
.documents-section,
.lawyer-section,
.guides-section,
.testimonials-section,
.pricing-section {
    padding: 6rem 0;
    position: relative;
}

.features-section {
    background: linear-gradient(180deg, var(--dark-bg) 0%, var(--court-dark-blue) 100%);
}

.database-section {
    background: linear-gradient(180deg, var(--court-dark-blue) 0%, var(--dark-bg) 100%);
}

.documents-section {
    background: linear-gradient(180deg, var(--dark-bg) 0%, var(--court-dark-blue) 100%);
}

.section-header {
    text-align: center;
    margin-bottom: 4rem;
}

.section-title {
    font-family: 'Playfair Display', serif;
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #ffffff 0%, var(--court-gold) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.section-subtitle {
    font-size: 1.25rem;
    color: var(--dark-text-secondary);
    max-width: 700px;
    margin: 0 auto;
    line-height: 1.7;
}

/* Feature Cards */
.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2.5rem;
}

.feature-card {
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(30, 64, 175, 0.1) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    border: 1px solid rgba(30, 64, 175, 0.2);
    transition: all 0.4s;
    position: relative;
    overflow: hidden;
}

.feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    transform: translateY(-100%);
    transition: transform 0.4s;
}

.feature-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: var(--court-gold);
}

.feature-card:hover::before {
    transform: translateY(0);
}

.feature-icon {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.75rem;
    margin-bottom: 1.75rem;
    box-shadow: 0 8px 24px rgba(212, 175, 55, 0.3);
    position: relative;
    overflow: hidden;
}

.feature-icon::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
}

.feature-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: var(--dark-text);
}

.feature-description {
    color: var(--dark-text-secondary);
    margin-bottom: 1.75rem;
    line-height: 1.7;
    font-size: 1rem;
}

.feature-tags {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.tag {
    background: rgba(212, 175, 55, 0.15);
    color: var(--court-gold);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.8125rem;
    font-weight: 600;
    border: 1px solid rgba(212, 175, 55, 0.3);
}

/* Database Cards */
.database-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2.5rem;
}

.database-card {
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(30, 64, 175, 0.1) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    border: 1px solid rgba(30, 64, 175, 0.2);
    transition: all 0.4s;
}

.database-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: var(--court-gold);
}

.database-icon {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.75rem;
    margin-bottom: 1.75rem;
    box-shadow: 0 8px 24px rgba(30, 64, 175, 0.3);
}

.database-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    margin-bottom: 1.25rem;
    color: var(--dark-text);
}

.database-list {
    list-style: none;
    margin-bottom: 2rem;
}

.database-list li {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0.75rem 0;
    color: var(--dark-text-secondary);
    font-size: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.database-list li:last-child {
    border-bottom: none;
}

.database-list li i {
    color: var(--court-gold);
    font-size: 1rem;
}

.btn-database {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    justify-content: center;
    transition: all 0.3s;
}

.btn-database:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(30, 64, 175, 0.4);
}

/* Document Categories */
.documents-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2.5rem;
}

.document-category {
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(139, 0, 0, 0.1) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    border: 1px solid rgba(139, 0, 0, 0.2);
    transition: all 0.4s;
}

.document-category:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: var(--court-maroon);
}

.category-icon {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, var(--court-maroon) 0%, #b91c1c 100%);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.75rem;
    margin-bottom: 1.75rem;
    box-shadow: 0 8px 24px rgba(139, 0, 0, 0.3);
}

.category-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    margin-bottom: 1.25rem;
    color: var(--dark-text);
}

.document-list {
    list-style: none;
    margin-bottom: 2rem;
}

.document-list li {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0.75rem 0;
    color: var(--dark-text-secondary);
    font-size: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.document-list li:last-child {
    border-bottom: none;
}

.document-list li i {
    color: var(--court-maroon);
}

.btn-generate {
    background: linear-gradient(135deg, var(--court-maroon) 0%, #b91c1c 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    justify-content: center;
    transition: all 0.3s;
}

.btn-generate:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(139, 0, 0, 0.4);
}

/* Lawyer Directory */
.lawyer-section {
    background: linear-gradient(180deg, var(--court-dark-blue) 0%, var(--dark-bg) 100%);
}

.lawyer-search {
    max-width: 800px;
    margin: 0 auto 4rem;
}

.search-container {
    display: flex;
    align-items: center;
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(30, 64, 175, 0.1) 100%);
    border-radius: 16px;
    padding: 0.75rem;
    border: 2px solid var(--court-gold);
    margin-bottom: 1.5rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.search-container i {
    padding: 0 1.25rem;
    color: var(--court-gold);
    font-size: 1.25rem;
}

#lawyerSearch {
    flex: 1;
    background: transparent;
    border: none;
    color: var(--dark-text);
    font-size: 1.125rem;
    padding: 0.75rem 0;
    outline: none;
    font-family: inherit;
}

#lawyerSearch::placeholder {
    color: var(--dark-text-secondary);
}

.btn-search {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s;
}

.btn-search:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
}

.specialization-filters {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    justify-content: center;
}

.filter-btn {
    background: linear-gradient(135deg, var(--dark-surface) 0%, transparent 100%);
    color: var(--dark-text-secondary);
    border: 2px solid var(--dark-border);
    border-radius: 30px;
    padding: 0.75rem 1.5rem;
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.filter-btn:hover {
    border-color: var(--court-gold);
    color: var(--court-gold);
    transform: translateY(-2px);
}

.filter-btn.active {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    border-color: var(--court-gold);
    box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
}

.lawyers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 2rem;
}

.lawyer-card {
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(30, 64, 175, 0.1) 100%);
    border-radius: 16px;
    padding: 2rem;
    text-align: center;
    border: 1px solid rgba(30, 64, 175, 0.2);
    transition: all 0.4s;
    position: relative;
    overflow: hidden;
}

.lawyer-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: var(--court-gold);
}

.lawyer-avatar {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2.5rem;
    margin: 0 auto 1.5rem;
    border: 4px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 24px rgba(30, 64, 175, 0.3);
}

.lawyer-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.375rem;
    margin-bottom: 0.5rem;
    color: var(--dark-text);
}

.lawyer-specialization {
    color: var(--court-gold);
    font-size: 0.9375rem;
    margin-bottom: 0.5rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.lawyer-experience {
    color: var(--dark-text-secondary);
    font-size: 0.875rem;
    margin-bottom: 1.5rem;
}

.btn-consult {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    justify-content: center;
    transition: all 0.3s;
}

.btn-consult:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(30, 64, 175, 0.4);
}

/* Legal Guides */
.guides-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2.5rem;
}

.guide-card {
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(212, 175, 55, 0.1) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    border: 1px solid rgba(212, 175, 55, 0.2);
    transition: all 0.4s;
}

.guide-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: var(--court-gold);
}

.guide-icon {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--warning) 100%);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.75rem;
    margin-bottom: 1.75rem;
    box-shadow: 0 8px 24px rgba(212, 175, 55, 0.3);
}

.guide-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: var(--dark-text);
}

.guide-description {
    color: var(--dark-text-secondary);
    margin-bottom: 1.75rem;
    line-height: 1.7;
    font-size: 1rem;
}

.guide-steps {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
    margin-bottom: 2rem;
}

.step {
    background: rgba(212, 175, 55, 0.15);
    color: var(--court-gold);
    padding: 0.75rem;
    border-radius: 8px;
    font-size: 0.875rem;
    font-weight: 600;
    text-align: center;
    border: 1px solid rgba(212, 175, 55, 0.3);
    transition: all 0.3s;
}

.step:hover {
    background: rgba(212, 175, 55, 0.25);
    transform: translateY(-2px);
}

.btn-guide {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--warning) 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    justify-content: center;
    transition: all 0.3s;
}

.btn-guide:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
}

/* Testimonials */
.testimonials-section {
    background: linear-gradient(180deg, var(--dark-bg) 0%, var(--court-dark-blue) 100%);
}

.testimonials-carousel {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2.5rem;
}

.testimonial-card {
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(30, 64, 175, 0.1) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    border: 1px solid rgba(30, 64, 175, 0.2);
    transition: all 0.4s;
    position: relative;
    overflow: hidden;
}

.testimonial-card::before {
    content: '"';
    position: absolute;
    top: 1rem;
    right: 2rem;
    font-family: 'Playfair Display', serif;
    font-size: 6rem;
    color: var(--court-gold);
    opacity: 0.1;
}

.testimonial-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: var(--court-gold);
}

.testimonial-rating {
    color: var(--court-gold);
    margin-bottom: 1.5rem;
    font-size: 1.25rem;
}

.testimonial-text {
    color: var(--dark-text-secondary);
    font-style: italic;
    margin-bottom: 2rem;
    line-height: 1.7;
    font-size: 1.125rem;
    position: relative;
    z-index: 1;
}

.testimonial-author {
    display: flex;
    align-items: center;
    gap: 1.25rem;
}

.author-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid var(--court-gold);
}

.author-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.author-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.125rem;
    margin-bottom: 0.25rem;
    color: var(--dark-text);
}

.author-title {
    font-size: 0.875rem;
    color: var(--dark-text-secondary);
}

/* Pricing */
.pricing-section {
    background: linear-gradient(180deg, var(--court-dark-blue) 0%, var(--dark-bg) 100%);
}

.pricing-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2.5rem;
    max-width: 1200px;
    margin: 0 auto;
}

.pricing-card {
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(30, 64, 175, 0.1) 100%);
    border-radius: 20px;
    padding: 3rem 2.5rem;
    border: 1px solid rgba(30, 64, 175, 0.2);
    transition: all 0.4s;
    position: relative;
    overflow: hidden;
}

.pricing-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: var(--court-gold);
}

.pricing-card.premium-plan {
    border: 2px solid var(--court-gold);
    transform: scale(1.05);
    box-shadow: 0 20px 50px rgba(212, 175, 55, 0.2);
}

.pricing-card.premium-plan:hover {
    transform: scale(1.05) translateY(-10px);
    box-shadow: 0 30px 60px rgba(212, 175, 55, 0.3);
}

.pricing-badge {
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    padding: 0.5rem 2rem;
    border-radius: 30px;
    font-size: 0.875rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
}

.pricing-badge.popular {
    background: linear-gradient(135deg, var(--court-maroon) 0%, #b91c1c 100%);
}

.pricing-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.75rem;
    text-align: center;
    margin-bottom: 1.5rem;
    color: var(--dark-text);
}

.pricing-price {
    text-align: center;
    margin-bottom: 1.5rem;
}

.currency {
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--dark-text-secondary);
    vertical-align: top;
}

.amount {
    font-size: 3.5rem;
    font-weight: 800;
    color: var(--court-gold);
    margin: 0 0.25rem;
    line-height: 1;
}

.period {
    font-size: 1rem;
    color: var(--dark-text-secondary);
    font-weight: 500;
}

.pricing-description {
    text-align: center;
    color: var(--dark-text-secondary);
    margin-bottom: 2.5rem;
    font-size: 1rem;
    line-height: 1.7;
}

.pricing-features {
    list-style: none;
    margin-bottom: 2.5rem;
}

.pricing-features li {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0.75rem 0;
    color: var(--dark-text-secondary);
    font-size: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.pricing-features li:last-child {
    border-bottom: none;
}

.pricing-features li i.fa-check-circle {
    color: var(--court-gold);
    font-size: 1.125rem;
}

.pricing-features li i.fa-times-circle {
    color: var(--error);
    opacity: 0.5;
    font-size: 1.125rem;
}

.btn-pricing {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1.25rem 2rem;
    font-size: 1.125rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    justify-content: center;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.btn-pricing:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
}

/* CTA Section */
.cta-section {
    padding: 6rem 0;
    background: linear-gradient(135deg, var(--court-dark-blue) 0%, var(--court-blue) 100%);
    color: white;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.cta-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
    opacity: 0.5;
    pointer-events: none;
}

.cta-content {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    z-index: 2;
}

.cta-title {
    font-family: 'Playfair Display', serif;
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    line-height: 1.2;
}

.cta-description {
    font-size: 1.25rem;
    opacity: 0.9;
    margin-bottom: 3rem;
    line-height: 1.7;
}

.cta-actions {
    display: flex;
    gap: 1.5rem;
    justify-content: center;
    margin-bottom: 3rem;
    flex-wrap: wrap;
}

.btn-cta-primary {
    background: white;
    color: var(--court-dark-blue);
    border: none;
    border-radius: 12px;
    padding: 1.25rem 2.5rem;
    font-size: 1.125rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.3s;
    box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
}

.btn-cta-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(255, 255, 255, 0.3);
    color: var(--court-maroon);
}

.btn-cta-secondary {
    background: transparent;
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 12px;
    padding: 1.25rem 2.5rem;
    font-size: 1.125rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.3s;
    backdrop-filter: blur(10px);
}

.btn-cta-secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: white;
    transform: translateY(-3px);
}

.cta-guarantee {
    display: flex;
    justify-content: center;
    gap: 2.5rem;
    flex-wrap: wrap;
}

.guarantee-item {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1rem;
    opacity: 0.9;
    background: rgba(255, 255, 255, 0.1);
    padding: 0.75rem 1.5rem;
    border-radius: 30px;
    backdrop-filter: blur(10px);
}

/* ============================================= */
/* FOOTER - LEGAL PROFESSIONAL */
/* ============================================= */

.premium-footer {
    background: linear-gradient(180deg, var(--dark-bg) 0%, #0a0f1c 100%);
    padding: 5rem 0 3rem;
    border-top: 2px solid var(--court-gold);
    position: relative;
}

.premium-footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--court-gold), transparent);
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 3rem;
    margin-bottom: 3rem;
}

.footer-section {
    display: flex;
    flex-direction: column;
}

.footer-logo {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 1.5rem;
}

.footer-description {
    color: var(--dark-text-secondary);
    margin-bottom: 1.5rem;
    line-height: 1.7;
    font-size: 0.9375rem;
}

.social-links {
    display: flex;
    gap: 0.75rem;
}

.social-link {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, var(--dark-surface) 0%, rgba(30, 64, 175, 0.1) 100%);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--dark-text);
    text-decoration: none;
    transition: all 0.3s;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.social-link:hover {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    transform: translateY(-3px);
    border-color: var(--court-gold);
}

.footer-heading {
    font-family: 'Playfair Display', serif;
    font-size: 1.25rem;
    margin-bottom: 1.5rem;
    font-weight: 600;
    color: var(--dark-text);
    position: relative;
    padding-bottom: 0.75rem;
}

.footer-heading::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 40px;
    height: 2px;
    background: var(--court-gold);
}

.footer-links {
    list-style: none;
}

.footer-links li {
    margin-bottom: 0.75rem;
}

.footer-links a {
    color: var(--dark-text-secondary);
    text-decoration: none;
    transition: all 0.3s;
    font-size: 0.9375rem;
    display: flex;
    align-items: center;
    gap: 8px;
}

.footer-links a:hover {
    color: var(--court-gold);
    transform: translateX(5px);
}

.footer-contact {
    list-style: none;
}

.footer-contact li {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 1.25rem;
    color: var(--dark-text-secondary);
    font-size: 0.9375rem;
}

.footer-contact a {
    color: var(--dark-text-secondary);
    text-decoration: none;
    transition: color 0.3s;
}

.footer-contact a:hover {
    color: var(--court-gold);
}

.footer-contact i {
    color: var(--court-gold);
    width: 24px;
    font-size: 1.125rem;
    margin-top: 2px;
}

.footer-bottom {
    padding-top: 3rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
}

.copyright {
    color: var(--dark-text-secondary);
    margin-bottom: 1.5rem;
    font-size: 0.9375rem;
}

.disclaimer {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    color: var(--court-gold);
    font-size: 0.875rem;
    max-width: 700px;
    margin: 0 auto;
    padding: 1rem;
    background: rgba(212, 175, 55, 0.1);
    border-radius: 8px;
    border: 1px solid rgba(212, 175, 55, 0.2);
}

.disclaimer i {
    font-size: 1.25rem;
    flex-shrink: 0;
}

/* ============================================= */
/* UTILITY COMPONENTS */
/* ============================================= */

.back-to-top {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 56px;
    height: 56px;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    transition: all 0.3s;
    z-index: 1000;
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
    border: 2px solid var(--court-gold);
}

.back-to-top:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 12px 30px rgba(212, 175, 55, 0.6);
}

.loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--dark-bg);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    backdrop-filter: blur(10px);
}

.loading-content {
    text-align: center;
}

.loading-spinner {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2.5rem;
    animation: spin 2s linear infinite;
    box-shadow: 0 8px 32px rgba(212, 175, 55, 0.4);
    margin: 0 auto 2rem;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.progress-bar {
    width: 250px;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
    margin: 1rem auto;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    animation: progress 2s ease-in-out infinite;
    border-radius: 3px;
}

@keyframes progress {
    0% { width: 0%; }
    50% { width: 70%; }
    100% { width: 100%; }
}

/* Modal */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    padding: 20px;
    backdrop-filter: blur(10px);
}

.modal-overlay.active {
    display: flex;
}

.modal {
    background: linear-gradient(135deg, var(--dark-surface) 0%, var(--court-dark-blue) 100%);
    border-radius: 20px;
    padding: 2.5rem;
    max-width: 500px;
    width: 100%;
    border: 2px solid var(--court-gold);
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    position: relative;
    overflow: hidden;
}

.modal::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--court-gold) 0%, var(--court-maroon) 100%);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.modal-header h2 {
    font-family: 'Playfair Display', serif;
    font-size: 1.75rem;
    color: var(--court-gold);
    display: flex;
    align-items: center;
    gap: 12px;
}

.modal-close {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--dark-text);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 8px;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
}

.modal-close:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: var(--court-gold);
    transform: rotate(90deg);
}

.download-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1.25rem;
    margin-top: 2rem;
}

.download-option {
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, transparent 100%);
    border-radius: 16px;
    padding: 2rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.4s;
    border: 1px solid rgba(30, 64, 175, 0.2);
    position: relative;
    overflow: hidden;
}

.download-option:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
    border-color: var(--court-gold);
}

.download-option i {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: var(--court-gold);
}

.download-option h3 {
    font-size: 1.125rem;
    margin-bottom: 0.5rem;
    color: var(--dark-text);
}

.download-option p {
    color: var(--dark-text-secondary);
    font-size: 0.875rem;
    margin: 0;
}

/* Toast Notifications */
.toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: linear-gradient(135deg, var(--dark-surface) 0%, var(--court-dark-blue) 100%);
    color: var(--dark-text);
    padding: 1rem 1.25rem;
    border-radius: 12px;
    border: 1px solid var(--court-gold);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    display: flex;
    align-items: center;
    gap: 12px;
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 1000;
    max-width: 350px;
    backdrop-filter: blur(10px);
}

.toast.show {
    transform: translateY(0);
    opacity: 1;
}

.toast.success i {
    color: var(--success);
}

.toast.error i {
    color: var(--error);
}

.toast.warning i {
    color: var(--warning);
}

.toast.info i {
    color: var(--info);
}

/* ============================================= */
/* MOBILE MENU */
/* ============================================= */

.mobile-menu-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.9);
    z-index: 1001;
    backdrop-filter: blur(10px);
}

.mobile-menu-container {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 85vw;
    max-width: 320px;
    background: linear-gradient(180deg, var(--court-dark-blue) 0%, var(--dark-bg) 100%);
    padding: 2rem;
    overflow-y: auto;
    border-left: 2px solid var(--court-gold);
    box-shadow: -10px 0 50px rgba(0, 0, 0, 0.5);
}

.mobile-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 3rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.mobile-close {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--dark-text);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 8px;
    transition: all 0.3s;
}

.mobile-close:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: var(--court-gold);
    transform: rotate(90deg);
}

.mobile-menu-links {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.mobile-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem;
    color: var(--dark-text);
    text-decoration: none;
    border-radius: 12px;
    transition: all 0.3s;
    font-size: 1.125rem;
    font-weight: 500;
    border: 1px solid transparent;
}

.mobile-link:hover {
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, transparent 100%);
    border-color: rgba(212, 175, 55, 0.3);
    transform: translateX(5px);
}

.mobile-link.active {
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, transparent 100%);
    border-color: var(--court-gold);
    color: var(--court-gold);
}

.mobile-link i {
    width: 24px;
    font-size: 1.25rem;
}

/* ============================================= */
/* RESPONSIVE DESIGN */
/* ============================================= */

@media (max-width: 1200px) {
    .hero-title {
        font-size: 3.25rem;
    }
    
    .section-title {
        font-size: 2.5rem;
    }
    
    .hero-container {
        gap: 3rem;
    }
}

@media (max-width: 992px) {
    .hero-container {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 4rem;
    }
    
    .hero-stats {
        justify-content: center;
    }
    
    .hero-actions {
        justify-content: center;
    }
    
    .hero-title {
        font-size: 2.75rem;
    }
    
    .section-title {
        font-size: 2.25rem;
    }
    
    .nav-menu {
        display: none;
    }
    
    .mobile-toggle {
        display: block;
    }
    
    .cta-actions {
        flex-direction: column;
        align-items: center;
    }
    
    .btn-cta-primary,
    .btn-cta-secondary {
        width: 100%;
        max-width: 300px;
        justify-content: center;
    }
    
    .trust-badges {
        justify-content: center;
    }
    
    /* Mobile sidebar */
    #chatInterface .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 85vw;
        max-width: 300px;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 10px 0 50px rgba(0, 0, 0, 0.5);
    }
    
    #chatInterface .sidebar.active {
        transform: translateX(0);
    }
    
    .sidebar-toggle {
        display: flex;
    }
    
    .sidebar-overlay {
        display: block;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 99;
        backdrop-filter: blur(5px);
    }
    
    .hide-on-mobile {
        display: none !important;
    }
}

@media (max-width: 768px) {
    .hero-title {
        font-size: 2.25rem;
    }
    
    .hero-subtitle {
        font-size: 1.125rem;
    }
    
    .section-title {
        font-size: 2rem;
    }
    
    .section-subtitle {
        font-size: 1.125rem;
    }
    
    .hero-stats {
        flex-direction: column;
        gap: 2rem;
        text-align: center;
    }
    
    .hero-actions {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
    }
    
    .btn-hero-primary,
    .btn-hero-secondary {
        width: 100%;
        justify-content: center;
    }
    
    .features-grid,
    .database-grid,
    .documents-grid,
    .guides-grid {
        grid-template-columns: 1fr;
    }
    
    .pricing-cards {
        grid-template-columns: 1fr;
    }
    
    .pricing-card.premium-plan {
        transform: none;
    }
    
    .pricing-card.premium-plan:hover {
        transform: translateY(-10px);
    }
    
    .testimonials-carousel {
        grid-template-columns: 1fr;
    }
    
    .draft-templates {
        grid-template-columns: 1fr;
    }
    
    .welcome-features {
        grid-template-columns: 1fr;
    }
    
    .guide-steps {
        grid-template-columns: 1fr;
    }
    
    .cta-title {
        font-size: 2.25rem;
    }
    
    .cta-description {
        font-size: 1.125rem;
    }
    
    .cta-guarantee {
        flex-direction: column;
        gap: 1rem;
        align-items: center;
    }
    
    .footer-content {
        grid-template-columns: 1fr;
        gap: 2.5rem;
    }
}

@media (max-width: 480px) {
    .hero-title {
        font-size: 1.875rem;
    }
    
    .section-title {
        font-size: 1.75rem;
    }
    
    .hero-badge {
        padding: 0.5rem 1rem;
    }
    
    .badge-text {
        font-size: 0.75rem;
    }
    
    .hero-stats .stat-number {
        font-size: 2rem;
    }
    
    .features-section,
    .database-section,
    .documents-section,
    .lawyer-section,
    .guides-section,
    .testimonials-section,
    .pricing-section {
        padding: 4rem 0;
    }
    
    .feature-card,
    .database-card,
    .document-category,
    .guide-card,
    .testimonial-card {
        padding: 1.5rem;
    }
    
    .pricing-card {
        padding: 2rem 1.5rem;
    }
    
    .amount {
        font-size: 2.75rem;
    }
    
    .back-to-top {
        width: 48px;
        height: 48px;
        bottom: 1rem;
        right: 1rem;
    }
}

/* ============================================= */
/* UTILITY CLASSES */
/* ============================================= */

.hide-on-mobile {
    display: none;
}

@media (min-width: 993px) {
    .hide-on-mobile {
        display: flex;
    }
    
    .show-on-mobile {
        display: none;
    }
}

/* Scrollbar Styling */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--dark-bg);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%);
    border-radius: 5px;
    border: 2px solid var(--dark-bg);
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--court-maroon) 0%, var(--court-gold) 100%);
}

/* Print Styles */
@media print {
    .premium-navbar,
    .mobile-toggle,
    .back-to-top,
    .cta-section,
    .premium-footer,
    #chatInterface,
    .btn-hero-primary,
    .btn-hero-secondary {
        display: none !important;
    }
    
    body {
        background: white !important;
        color: black !important;
    }
    
    .hero-section,
    .features-section,
    .database-section,
    .documents-section {
        padding: 2rem 0 !important;
        break-inside: avoid;
    }
}

/* ============================================= */
/* TYPING ANIMATION STYLES */
/* ============================================= */

.typing-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0.5rem;
}

.typing-dot {
    width: 8px;
    height: 8px;
    background: var(--court-gold);
    border-radius: 50%;
    animation: typing-bounce 1.4s infinite ease-in-out both;
}

.typing-dot:nth-child(1) {
    animation-delay: -0.32s;
}

.typing-dot:nth-child(2) {
    animation-delay: -0.16s;
}

@keyframes typing-bounce {
    0%, 80%, 100% { 
        transform: scale(0);
        opacity: 0.4;
    }
    40% { 
        transform: scale(1);
        opacity: 1;
    }
}

/* ============================================= */
/* REALISTIC TYPEWRITER EFFECT */
/* ============================================= */

.typewriter-text {
    overflow: hidden;
    white-space: pre-wrap;
    border-right: 2px solid var(--court-gold);
    animation: blink-caret 0.75s step-end infinite;
}

@keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: var(--court-gold); }
}

/* Stop button position fix */
.stop-button-container {
    display: flex;
    justify-content: center;
    margin-top: 1rem;
}
    </style>
</head>
<body>
    <!-- Premium Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner">
                <i class="fas fa-gavel"></i>
            </div>
            <h2 class="legal-heading" style="background: linear-gradient(135deg, var(--court-gold) 0%, var(--court-maroon) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 1rem;">LegalSwami</h2>
            <p class="legal-caption">Initializing AI Legal Assistant...</p>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Premium Navigation Bar -->
        <nav class="premium-navbar">
            <div class="nav-container">
                <!-- Logo -->
                <a href="#home" class="nav-logo">
                    <div class="logo-icon">
                        <i class="fas fa-gavel"></i>
                    </div>
                    <div class="logo-text">
                        <h1 class="logo-title">LegalSwami</h1>
                        <p class="logo-subtitle">AI Legal Assistant</p>
                    </div>
                </a>

                <!-- Desktop Navigation -->
                <div class="nav-menu">
                    <a href="#home" class="nav-link active">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <a href="#features" class="nav-link">
                        <i class="fas fa-star"></i>
                        <span>Features</span>
                    </a>
                    <a href="#documents" class="nav-link">
                        <i class="fas fa-file-contract"></i>
                        <span>Documents</span>
                    </a>
                    <a href="#legalDatabase" class="nav-link">
                        <i class="fas fa-database"></i>
                        <span>Legal Database</span>
                    </a>
                    <a href="#lawyerDirectory" class="nav-link">
                        <i class="fas fa-user-tie"></i>
                        <span>Find Lawyers</span>
                    </a>
                    <a href="#pricing" class="nav-link">
                        <i class="fas fa-tag"></i>
                        <span>Pricing</span>
                    </a>
                </div>

                <!-- User Actions -->
                <div class="nav-actions">
                    <!-- ADDED: Google Login Button -->
                    <a href="#" class="google-login-btn" id="googleLoginBtn">
                        <i class="fab fa-google"></i>
                        <span>Sign in with Google</span>
                    </a>
                    
                    <!-- Mobile Menu Toggle -->
                    <button class="mobile-toggle" id="mobileToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Mobile Menu -->
        <div class="mobile-menu-overlay" id="mobileMenu">
            <div class="mobile-menu-container">
                <div class="mobile-menu-header">
                    <div class="logo-icon">
                        <i class="fas fa-gavel"></i>
                    </div>
                    <button class="mobile-close" id="mobileClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mobile-menu-links">
                    <a href="#home" class="mobile-link active">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <a href="#features" class="mobile-link">
                        <i class="fas fa-star"></i>
                        <span>Features</span>
                    </a>
                    <a href="#documents" class="mobile-link">
                        <i class="fas fa-file-contract"></i>
                        <span>Documents</span>
                    </a>
                    <a href="#legalDatabase" class="mobile-link">
                        <i class="fas fa-database"></i>
                        <span>Legal Database</span>
                    </a>
                    <a href="#lawyerDirectory" class="mobile-link">
                        <i class="fas fa-user-tie"></i>
                        <span>Find Lawyers</span>
                    </a>
                    <a href="#legalGuides" class="mobile-link">
                        <i class="fas fa-book"></i>
                        <span>Legal Guides</span>
                    </a>
                    <a href="#pricing" class="mobile-link">
                        <i class="fas fa-tag"></i>
                        <span>Pricing</span>
                    </a>
                    <a href="#chat" class="mobile-link" id="mobileStartChat">
                        <i class="fas fa-comments"></i>
                        <span>Start Chat</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Hero Section -->
        <section id="home" class="hero-section">
            <div class="hero-container container">
                <!-- Animated Background Elements -->
                <div class="hero-bg-elements">
                    <div class="floating-element" style="top: 20%; left: 10%;">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <div class="floating-element" style="top: 60%; right: 15%;">
                        <i class="fas fa-gavel"></i>
                    </div>
                    <div class="floating-element" style="bottom: 20%; left: 20%;">
                        <i class="fas fa-scale-balanced"></i>
                    </div>
                </div>
                
                <div class="hero-content">
                    <div class="hero-badge">
                        <span class="badge-text">
                            <i class="fas fa-bolt"></i>
                            AI-POWERED LEGAL ASSISTANT
                        </span>
                    </div>
                    
                    <h1 class="hero-title">
                        Get <span style="background: linear-gradient(135deg, var(--court-gold) 0%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Instant Legal Help</span><br>
                        From Your AI Assistant
                    </h1>
                    
                    <p class="hero-subtitle">
                        LegalSwami provides 24/7 AI-powered legal guidance, document generation, 
                        and legal research assistance. Get instant answers to your legal questions 
                        in simple, understandable language.
                    </p>
                    
                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number">10,000+</div>
                            <div class="stat-label">Legal Documents Generated</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">50,000+</div>
                            <div class="stat-label">Legal Questions Answered</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">99.8%</div>
                            <div class="stat-label">User Satisfaction Rate</div>
                        </div>
                    </div>
                    
                    <div class="hero-actions">
                        <button id="startChatBtn" class="btn-hero-primary">
                            <i class="fas fa-comments"></i>
                            <span>Start Free Chat Now</span>
                        </button>
                        
                        <button id="watchDemo" class="btn-hero-secondary">
                            <i class="fas fa-play-circle"></i>
                            <span>Watch Demo Video</span>
                        </button>
                    </div>
                    
                    <div class="hero-trust">
                        <div class="trust-label">Trusted by</div>
                        <div class="trust-badges">
                            <div class="trust-badge">
                                <i class="fas fa-university"></i>
                                <span>Law Firms</span>
                            </div>
                            <div class="trust-badge">
                                <i class="fas fa-graduation-cap"></i>
                                <span>Law Students</span>
                            </div>
                            <div class="trust-badge">
                                <i class="fas fa-briefcase"></i>
                                <span>Businesses</span>
                            </div>
                            <div class="trust-badge">
                                <i class="fas fa-users"></i>
                                <span>Individuals</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="hero-illustration">
                    <div class="ai-assistant-card">
                        <div class="assistant-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3 class="assistant-title">AI Legal Assistant</h3>
                        <p class="assistant-subtitle">Available 24/7</p>
                        
                        <div class="assistant-features">
                            <div class="feature">
                                <i class="fas fa-check-circle"></i>
                                <span>Instant Responses</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check-circle"></i>
                                <span>Multi-Language</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check-circle"></i>
                                <span>Document Generation</span>
                            </div>
                        </div>
                        
                        <button class="btn-assistant" id="heroAssistantBtn">
                            <i class="fas fa-comment-alt"></i>
                            Ask Legal Question
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Scroll Indicator -->
            <div class="scroll-indicator">
                <div class="mouse">
                    <div class="wheel"></div>
                </div>
                <div class="arrow">
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="features-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">
                        <span style="background: linear-gradient(135deg, var(--court-gold) 0%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Powerful Features</span> for All Your Legal Needs
                    </h2>
                    <p class="section-subtitle">
                        Everything you need in one comprehensive legal assistant
                    </p>
                </div>
                
                <div class="features-grid">
                    <!-- Feature 1 -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h3 class="feature-title">AI Chat Assistant</h3>
                        <p class="feature-description">
                            Ask legal questions in natural language and get instant, accurate responses powered by advanced AI.
                        </p>
                        <div class="feature-tags">
                            <span class="tag">24/7 Available</span>
                            <span class="tag">Multi-Language</span>
                        </div>
                    </div>
                    
                    <!-- Feature 2 -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-file-contract"></i>
                        </div>
                        <h3 class="feature-title">Smart Document Generation</h3>
                        <p class="feature-description">
                            Generate legal documents instantly in PDF, DOC, and TXT formats with customizable templates.
                        </p>
                        <div class="feature-tags">
                            <span class="tag">100+ Templates</span>
                            <span class="tag">Customizable</span>
                        </div>
                    </div>
                    
                    <!-- Feature 3 -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3 class="feature-title">Bank-Level Security</h3>
                        <p class="feature-description">
                            End-to-end encryption and secure authentication to protect your sensitive legal data.
                        </p>
                        <div class="feature-tags">
                            <span class="tag">AES-256</span>
                            <span class="tag">GDPR Compliant</span>
                        </div>
                    </div>
                    
                    <!-- Feature 4 -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <h3 class="feature-title">Complete Chat History</h3>
                        <p class="feature-description">
                            Access your complete chat history anytime. Export conversations as documents for record keeping.
                        </p>
                        <div class="feature-tags">
                            <span class="tag">Unlimited History</span>
                            <span class="tag">Export Options</span>
                        </div>
                    </div>
                    
                    <!-- Feature 5 -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3 class="feature-title">Mobile Responsive</h3>
                        <p class="feature-description">
                            Access LegalSwami from any device - desktop, tablet, or mobile phone with native-like experience.
                        </p>
                        <div class="feature-tags">
                            <span class="tag">PWA Support</span>
                            <span class="tag">Offline Mode</span>
                        </div>
                    </div>
                    
                    <!-- Feature 6 -->
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-language"></i>
                        </div>
                        <h3 class="feature-title">Multi-Language Support</h3>
                        <p class="feature-description">
                            Get legal advice in multiple languages including Hindi, English, Marathi, Gujarati, and more.
                        </p>
                        <div class="feature-tags">
                            <span class="tag">10+ Languages</span>
                            <span class="tag">Real-time Translation</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Legal Database Section -->
        <section id="legalDatabase" class="database-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">
                        <span style="background: linear-gradient(135deg, var(--court-gold) 0%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Legal Database</span> & Research Tools
                    </h2>
                    <p class="section-subtitle">
                        Access comprehensive legal resources and research materials
                    </p>
                </div>
                
                <div class="database-grid">
                    <!-- Legal Acts Database -->
                    <div class="database-card">
                        <div class="database-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3 class="database-title">Acts & Statutes</h3>
                        <ul class="database-list">
                            <li><i class="fas fa-search"></i> IPC (Indian Penal Code)</li>
                            <li><i class="fas fa-search"></i> CrPC (Criminal Procedure Code)</li>
                            <li><i class="fas fa-search"></i> CPC (Civil Procedure Code)</li>
                            <li><i class="fas fa-search"></i> Constitution of India</li>
                            <li><i class="fas fa-search"></i> Consumer Protection Act</li>
                        </ul>
                        <button class="btn-database">
                            <i class="fas fa-search"></i>
                            Search Acts
                        </button>
                    </div>
                    
                    <!-- Case Laws Database -->
                    <div class="database-card">
                        <div class="database-icon">
                            <i class="fas fa-gavel"></i>
                        </div>
                        <h3 class="database-title">Case Laws Database</h3>
                        <ul class="database-list">
                            <li><i class="fas fa-balance-scale"></i> Supreme Court Judgments</li>
                            <li><i class="fas fa-balance-scale"></i> High Court Judgments</li>
                            <li><i class="fas fa-balance-scale"></i> Landmark Cases</li>
                            <li><i class="fas fa-balance-scale"></i> Recent Judgments</li>
                            <li><i class="fas fa-balance-scale"></i> Case Citations</li>
                        </ul>
                        <button class="btn-database">
                            <i class="fas fa-gavel"></i>
                            Search Case Laws
                        </button>
                    </div>
                    
                    <!-- Legal Calculator -->
                    <div class="database-card">
                        <div class="database-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <h3 class="database-title">Legal Calculators</h3>
                        <ul class="database-list">
                            <li><i class="fas fa-calculator"></i> Court Fee Calculator</li>
                            <li><i class="fas fa-calculator"></i> Stamp Duty Calculator</li>
                            <li><i class="fas fa-calculator"></i> Compensation Calculator</li>
                            <li><i class="fas fa-calculator"></i> Interest Calculator</li>
                            <li><i class="fas fa-calculator"></i> Tax Calculator</li>
                        </ul>
                        <button class="btn-database">
                            <i class="fas fa-calculator"></i>
                            Open Calculator
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Document Types Section -->
        <section id="documents" class="documents-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">
                        Generate <span style="background: linear-gradient(135deg, var(--court-gold) 0%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Legal Documents</span> Instantly
                    </h2>
                    <p class="section-subtitle">
                        Professional legal documents at your fingertips
                    </p>
                </div>
                
                <div class="documents-grid">
                    <!-- Document Category 1 -->
                    <div class="document-category">
                        <div class="category-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h3 class="category-title">Agreements & Contracts</h3>
                        <ul class="document-list">
                            <li><i class="fas fa-check-circle"></i> Rental Agreement</li>
                            <li><i class="fas fa-check-circle"></i> Non-Disclosure Agreement</li>
                            <li><i class="fas fa-check-circle"></i> Employment Contract</li>
                            <li><i class="fas fa-check-circle"></i> Service Agreement</li>
                            <li><i class="fas fa-check-circle"></i> Partnership Agreement</li>
                        </ul>
                        <button class="btn-generate">
                            <i class="fas fa-magic"></i>
                            Generate Now
                        </button>
                    </div>
                    
                    <!-- Document Category 2 -->
                    <div class="document-category">
                        <div class="category-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h3 class="category-title">Legal Notices & Letters</h3>
                        <ul class="document-list">
                            <li><i class="fas fa-check-circle"></i> Legal Notice</li>
                            <li><i class="fas fa-check-circle"></i> Cease & Desist Notice</li>
                            <li><i class="fas fa-check-circle"></i> Demand Letter</li>
                            <li><i class="fas fa-check-circle"></i> Notice to Quit</li>
                            <li><i class="fas fa-check-circle"></i> Consumer Complaint</li>
                        </ul>
                        <button class="btn-generate">
                            <i class="fas fa-magic"></i>
                            Generate Now
                        </button>
                    </div>
                    
                    <!-- Document Category 3 -->
                    <div class="document-category">
                        <div class="category-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3 class="category-title">Personal & Family</h3>
                        <ul class="document-list">
                            <li><i class="fas fa-check-circle"></i> Will & Testament</li>
                            <li><i class="fas fa-check-circle"></i> Power of Attorney</li>
                            <li><i class="fas fa-check-circle"></i> Affidavit</li>
                            <li><i class="fas fa-check-circle"></i> Gift Deed</li>
                            <li><i class="fas fa-check-circle"></i> Divorce Papers</li>
                        </ul>
                        <button class="btn-generate">
                            <i class="fas fa-magic"></i>
                            Generate Now
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lawyer Directory Section -->
        <section id="lawyerDirectory" class="lawyer-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">
                        Find <span style="background: linear-gradient(135deg, var(--court-gold) 0%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Qualified Lawyers</span>
                    </h2>
                    <p class="section-subtitle">
                        Connect with experienced legal professionals
                    </p>
                </div>
                
                <div class="lawyer-search">
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="lawyerSearch" placeholder="Search by specialization, location, or name...">
                        <button class="btn-search" id="lawyerSearchBtn">
                            <i class="fas fa-search"></i>
                            Search
                        </button>
                    </div>
                    
                    <div class="specialization-filters">
                        <button class="filter-btn active" data-specialization="all">All</button>
                        <button class="filter-btn" data-specialization="criminal">Criminal</button>
                        <button class="filter-btn" data-specialization="civil">Civil</button>
                        <button class="filter-btn" data-specialization="corporate">Corporate</button>
                        <button class="filter-btn" data-specialization="family">Family</button>
                        <button class="filter-btn" data-specialization="property">Property</button>
                    </div>
                </div>
                
                <div class="lawyers-grid" id="lawyersGrid">
                    <!-- Lawyers will be dynamically loaded here -->
                    <div class="lawyer-card" data-specialization="criminal">
                        <div class="lawyer-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3 class="lawyer-name">Adv. Rajesh Kumar</h3>
                        <p class="lawyer-specialization">Criminal Law Expert</p>
                        <p class="lawyer-experience">15+ Years Experience</p>
                        <button class="btn-consult">
                            <i class="fas fa-comments"></i> Consult Now
                        </button>
                    </div>
                    
                    <div class="lawyer-card" data-specialization="corporate">
                        <div class="lawyer-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3 class="lawyer-name">Adv. Priya Sharma</h3>
                        <p class="lawyer-specialization">Corporate Law Expert</p>
                        <p class="lawyer-experience">12+ Years Experience</p>
                        <button class="btn-consult">
                            <i class="fas fa-comments"></i> Consult Now
                        </button>
                    </div>
                    
                    <div class="lawyer-card" data-specialization="family">
                        <div class="lawyer-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3 class="lawyer-name">Adv. Amit Patel</h3>
                        <p class="lawyer-specialization">Family Law Expert</p>
                        <p class="lawyer-experience">10+ Years Experience</p>
                        <button class="btn-consult">
                            <i class="fas fa-comments"></i> Consult Now
                        </button>
                    </div>
                    
                    <div class="lawyer-card" data-specialization="property">
                        <div class="lawyer-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3 class="lawyer-name">Adv. Neha Singh</h3>
                        <p class="lawyer-specialization">Property Law Expert</p>
                        <p class="lawyer-experience">8+ Years Experience</p>
                        <button class="btn-consult">
                            <i class="fas fa-comments"></i> Consult Now
                        </button>
                    </div>
                    
                    <div class="lawyer-card" data-specialization="civil">
                        <div class="lawyer-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3 class="lawyer-name">Adv. Vikram Singh</h3>
                        <p class="lawyer-specialization">Civil Law Expert</p>
                        <p class="lawyer-experience">14+ Years Experience</p>
                        <button class="btn-consult">
                            <i class="fas fa-comments"></i> Consult Now
                        </button>
                    </div>
                    
                    <div class="lawyer-card" data-specialization="criminal">
                        <div class="lawyer-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3 class="lawyer-name">Adv. Sanjay Gupta</h3>
                        <p class="lawyer-specialization">Criminal Law Expert</p>
                        <p class="lawyer-experience">18+ Years Experience</p>
                        <button class="btn-consult">
                            <i class="fas fa-comments"></i> Consult Now
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Legal Procedure Guides Section -->
        <section id="legalGuides" class="guides-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">
                        <span style="background: linear-gradient(135deg, var(--court-gold) 0%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Step-by-Step</span> Legal Guides
                    </h2>
                    <p class="section-subtitle">
                        Understand legal procedures with easy-to-follow guides
                    </p>
                </div>
                
                <div class="guides-grid">
                    <div class="guide-card">
                        <div class="guide-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h3 class="guide-title">How to File a Case</h3>
                        <p class="guide-description">
                            Complete step-by-step guide for filing different types of cases in Indian courts.
                        </p>
                        <div class="guide-steps">
                            <span class="step">1. Document Preparation</span>
                            <span class="step">2. Court Selection</span>
                            <span class="step">3. Fee Payment</span>
                            <span class="step">4. Case Number</span>
                        </div>
                        <button class="btn-guide">
                            <i class="fas fa-book-open"></i>
                            View Guide
                        </button>
                    </div>
                    
                    <div class="guide-card">
                        <div class="guide-icon">
                            <i class="fas fa-file-contract"></i>
                        </div>
                        <h3 class="guide-title">Document Registration Process</h3>
                        <p class="guide-description">
                            Learn how to register legal documents with proper procedures and fees.
                        </p>
                        <div class="guide-steps">
                            <span class="step">1. Stamp Duty</span>
                            <span class="step">2. Witness Arrangement</span>
                            <span class="step">3. Registration Office</span>
                            <span class="step">4. Final Registration</span>
                        </div>
                        <button class="btn-guide">
                            <i class="fas fa-book-open"></i>
                            View Guide
                        </button>
                    </div>
                    
                    <div class="guide-card">
                        <div class="guide-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h3 class="guide-title">Consumer Complaint Process</h3>
                        <p class="guide-description">
                            Guide to filing consumer complaints with proper documentation and procedures.
                        </p>
                        <div class="guide-steps">
                            <span class="step">1. Complaint Drafting</span>
                            <span class="step">2. Evidence Collection</span>
                            <span class="step">3. Forum Selection</span>
                            <span class="step">4. Hearing Process</span>
                        </div>
                        <button class="btn-guide">
                            <i class="fas fa-book-open"></i>
                            View Guide
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="testimonials-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">
                        Trusted by <span style="background: linear-gradient(135deg, var(--court-gold) 0%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Thousands</span> of Users
                    </h2>
                    <p class="section-subtitle">
                        See what our users have to say about LegalSwami
                    </p>
                </div>
                
                <div class="testimonials-carousel">
                    <!-- Testimonial 1 -->
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">
                            "LegalSwami helped me draft a professional rental agreement in minutes. The AI understood exactly what I needed and generated a perfect document. Saved me ₹5000 in lawyer fees!"
                        </p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Rahul Sharma">
                            </div>
                            <div class="author-info">
                                <h4 class="author-name">Rahul Sharma</h4>
                                <p class="author-title">Small Business Owner</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial 2 -->
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <p class="testimonial-text">
                            "As a law student, LegalSwami is a game-changer! It helps me understand complex legal concepts and provides excellent research assistance. Like having a personal tutor 24/7."
                        </p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Priya Patel">
                            </div>
                            <div class="author-info">
                                <h4 class="author-name">Priya Patel</h4>
                                <p class="author-title">Law Student, NLU Delhi</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial 3 -->
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">
                            "The document generation feature saved our startup thousands! We needed multiple NDAs and service agreements. LegalSwami generated perfect documents in minutes. Incredible tool!"
                        </p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Ankit Verma">
                            </div>
                            <div class="author-info">
                                <h4 class="author-name">Ankit Verma</h4>
                                <p class="author-title">Tech Entrepreneur</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="pricing-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">
                        Simple, <span style="background: linear-gradient(135deg, var(--court-gold) 0%, #fff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Transparent</span> Pricing
                    </h2>
                    <p class="section-subtitle">
                        Choose the perfect plan for your legal needs
                    </p>
                </div>
                
                <div class="pricing-cards">
                    <!-- Free Plan -->
                    <div class="pricing-card">
                        <div class="pricing-badge">FREE</div>
                        <h3 class="pricing-title">Basic</h3>
                        <div class="pricing-price">
                            <span class="currency">₹</span>
                            <span class="amount">0</span>
                            <span class="period">/month</span>
                        </div>
                        <p class="pricing-description">Perfect for trying out LegalSwami</p>
                        
                        <ul class="pricing-features">
                            <li><i class="fas fa-check-circle"></i> 10 AI Chat Messages/Day</li>
                            <li><i class="fas fa-check-circle"></i> 3 Document Generations/Month</li>
                            <li><i class="fas fa-check-circle"></i> Basic Legal Questions</li>
                            <li><i class="fas fa-times-circle"></i> No Priority Support</li>
                            <li><i class="fas fa-times-circle"></i> No Document History</li>
                        </ul>
                        
                        <button class="btn-pricing">
                            Get Started Free
                        </button>
                    </div>
                    
                    <!-- Pro Plan -->
                    <div class="pricing-card premium-plan">
                        <div class="pricing-badge popular">POPULAR</div>
                        <h3 class="pricing-title">Professional</h3>
                        <div class="pricing-price">
                            <span class="currency">₹</span>
                            <span class="amount">499</span>
                            <span class="period">/month</span>
                        </div>
                        <p class="pricing-description">Perfect for professionals & businesses</p>
                        
                        <ul class="pricing-features">
                            <li><i class="fas fa-check-circle"></i> Unlimited AI Chat Messages</li>
                            <li><i class="fas fa-check-circle"></i> 50 Document Generations/Month</li>
                            <li><i class="fas fa-check-circle"></i> All Document Templates</li>
                            <li><i class="fas fa-check-circle"></i> Priority Support</li>
                            <li><i class="fas fa-check-circle"></i> Complete Chat History</li>
                        </ul>
                        
                        <button class="btn-pricing">
                            <i class="fas fa-crown"></i>
                            Get Professional
                        </button>
                    </div>
                    
                    <!-- Business Plan -->
                    <div class="pricing-card">
                        <div class="pricing-badge">BUSINESS</div>
                        <h3 class="pricing-title">Enterprise</h3>
                        <div class="pricing-price">
                            <span class="currency">₹</span>
                            <span class="amount">1,499</span>
                            <span class="period">/month</span>
                        </div>
                        <p class="pricing-description">For law firms & large organizations</p>
                        
                        <ul class="pricing-features">
                            <li><i class="fas fa-check-circle"></i> Everything in Professional</li>
                            <li><i class="fas fa-check-circle"></i> Unlimited Document Generation</li>
                            <li><i class="fas fa-check-circle"></i> Team Collaboration</li>
                            <li><i class="fas fa-check-circle"></i> Custom Templates</li>
                            <li><i class="fas fa-check-circle"></i> Dedicated Account Manager</li>
                        </ul>
                        
                        <button class="btn-pricing">
                            Contact Sales
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="container">
                <div class="cta-content">
                    <h2 class="cta-title">
                        Ready to Experience <br>
                        AI-Powered Legal Assistance?
                    </h2>
                    <p class="cta-description">
                        Join thousands of satisfied users who trust LegalSwami for their legal needs. 
                        No credit card required to get started.
                    </p>
                    
                    <div class="cta-actions">
                        <button id="ctaStartChat" class="btn-cta-primary">
                            <i class="fas fa-rocket"></i>
                            Start Free Chat Now
                        </button>
                        
                        <button id="ctaScheduleDemo" class="btn-cta-secondary">
                            <i class="fas fa-calendar"></i>
                            Schedule Demo
                        </button>
                    </div>
                    
                    <div class="cta-guarantee">
                        <div class="guarantee-item">
                            <i class="fas fa-shield-alt"></i>
                            <span>100% Secure & Private</span>
                        </div>
                        <div class="guarantee-item">
                            <i class="fas fa-clock"></i>
                            <span>Available 24/7</span>
                        </div>
                        <div class="guarantee-item">
                            <i class="fas fa-headset"></i>
                            <span>Priority Support</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CHATGPT-LIKE CHAT INTERFACE -->
        <div id="chatInterface" class="chat-interface">
            <div class="container">
                <div class="chat-container">
                    <header>
                        <div class="logo">
                            <button class="sidebar-toggle show-on-mobile" id="sidebarToggle">
                                <i class="fas fa-bars"></i>
                            </button>
                            <div class="logo-icon">
                                <i class="fas fa-scale-balanced"></i>
                            </div>
                            <h1>LegalSwami</h1>
                        </div>
                        
                        <div class="header-actions">
                            <!-- Only two buttons: Back to Home and New Chat -->
                            <button id="backToHomeBtn" class="header-btn">
                                <i class="fas fa-home"></i>
                                <span>Back to Home</span>
                            </button>
                            
                            <button id="newChatBtnHeader" class="header-btn">
                                <i class="fas fa-plus"></i>
                                <span>New Chat</span>
                            </button>
                        </div>
                    </header>
                    
                    <div class="main-content">
                        <!-- Down Arrow Button (Scroll to Bottom) -->
                        <button class="scroll-to-bottom-btn" id="scrollToBottomBtn" title="Scroll to bottom">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        
                        <aside class="sidebar" id="sidebar">
                            <!-- Sidebar Tabs -->
                            <div class="sidebar-tabs">
                                <button class="sidebar-tab active" data-tab="legal-topics">
                                    <i class="fas fa-book"></i>
                                    <span class="hide-on-mobile">Legal Topics</span>
                                </button>
                                <button class="sidebar-tab" data-tab="chat-history">
                                    <i class="fas fa-history"></i>
                                    <span class="hide-on-mobile">Chat History</span>
                                </button>
                            </div>
                            
                            <!-- Legal Topics Tab Content -->
                            <div class="tab-content active" id="legal-topics-content">
                                <div class="sidebar-header">
                                    <h2><i class="fas fa-book"></i> Legal Topics</h2>
                                </div>
                                
                                <div class="sidebar-section">
                                    <h3><i class="fas fa-gavel"></i> Common Legal Areas</h3>
                                    <div class="topic-list">
                                        <button class="topic-item" data-topic="contract">
                                            <i class="fas fa-file-contract"></i>
                                            <span>Contract Law</span>
                                            <span class="topic-badge">Advanced</span>
                                        </button>
                                        <button class="topic-item" data-topic="employment">
                                            <i class="fas fa-briefcase"></i>
                                            <span>Employment Law</span>
                                            <span class="topic-badge">Popular</span>
                                        </button>
                                        <button class="topic-item" data-topic="intellectual">
                                            <i class="fas fa-lightbulb"></i>
                                            <span>Intellectual Property</span>
                                            <span class="topic-badge">Specialized</span>
                                        </button>
                                        <button class="topic-item" data-topic="realestate">
                                            <i class="fas fa-house"></i>
                                            <span>Real Estate Law</span>
                                            <span class="topic-badge">Common</span>
                                        </button>
                                        <button class="topic-item" data-topic="family">
                                            <i class="fas fa-heart"></i>
                                            <span>Family Law</span>
                                            <span class="topic-badge">Sensitive</span>
                                        </button>
                                        <button class="topic-item" data-topic="criminal">
                                            <i class="fas fa-gavel"></i>
                                            <span>Criminal Law</span>
                                            <span class="topic-badge">Critical</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Chat History Tab Content -->
                            <div class="tab-content" id="chat-history-content">
                                <div class="history-header">
                                    <h2><i class="fas fa-history"></i> Chat History</h2>
                                    <button class="new-chat-btn" id="newChatBtn">
                                        <i class="fas fa-plus"></i>
                                        <span>New Chat</span>
                                    </button>
                                </div>
                                
                                <div class="history-list" id="historyList">
                                    <div class="empty-history">
                                        <i class="fas fa-comments"></i>
                                        <p>No chat history yet</p>
                                        <p style="font-size: 0.8125rem; margin-top: 0.5rem;">Start a conversation to see it here</p>
                                    </div>
                                </div>
                            </div>
                        </aside>
                        
                        <main id="chatContent">
                            <div class="chat-messages">
                                <div id="chatMessages">
                                    <!-- Welcome Message will be added dynamically -->
                                </div>
                            </div>
                            
                            <div class="input-container">
                                <div class="input-area">
                                    <textarea 
                                        id="userInput" 
                                        placeholder="Ask any legal question or attach files (images, PDF, TXT)... (Press Enter for new line, Ctrl+Enter to send)"
                                        rows="1"
                                    ></textarea>
                                    
                                    <div class="input-buttons">
                                        <!-- Attachment Button -->
                                        <button class="attachment-btn" id="attachmentBtn" title="Attach files (images, PDF, TXT)">
                                            <i class="fas fa-paperclip"></i>
                                        </button>
                                        
                                        <!-- Voice Input Button -->
                                        <button class="input-microphone-btn" id="inputMicrophoneBtn" title="Voice input">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                        
                                        <!-- Send/Stop Button -->
                                        <button class="send-button" id="sendButton">
                                            <i class="fas fa-paper-plane"></i> <span class="hide-on-mobile">Send</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                    
                    <!-- Download Modal -->
                    <div class="modal-overlay" id="downloadModal">
                        <div class="modal">
                            <div class="modal-header">
                                <h2><i class="fas fa-download"></i> Download Chat</h2>
                                <button class="modal-close" id="closeDownloadModal">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="modal-content">
                                <p>Select the format you want to download your chat in:</p>
                                
                                <div class="download-options">
                                    <div class="download-option" data-format="doc">
                                        <i class="fas fa-file-word"></i>
                                        <h3>Word Document</h3>
                                        <p>.doc format</p>
                                    </div>
                                    <div class="download-option" data-format="pdf">
                                        <i class="fas fa-file-pdf"></i>
                                        <h3>PDF Document</h3>
                                        <p>.pdf format</p>
                                    </div>
                                    <div class="download-option" data-format="txt">
                                        <i class="fas fa-file-alt"></i>
                                        <h3>Text File</h3>
                                        <p>.txt format</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Toast Notifications -->
                    <div class="toast" id="toast">
                        <i class="fas fa-check-circle"></i>
                        <span id="toast-message">Message sent successfully</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="premium-footer">
            <div class="container">
                <div class="footer-content">
                    <!-- Company Info -->
                    <div class="footer-section">
                        <div class="footer-logo">
                            <div class="logo-icon">
                                <i class="fas fa-gavel"></i>
                            </div>
                            <div class="logo-text">
                                <h3 class="logo-title">LegalSwami</h3>
                                <p class="logo-subtitle">AI Legal Assistant</p>
                            </div>
                        </div>
                        <p class="footer-description">
                            Making legal assistance accessible to everyone with AI-powered technology.
                        </p>
                        <div class="social-links">
                            <a href="#" class="social-link">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-linkedin"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-github"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Quick Links -->
                    <div class="footer-section">
                        <h4 class="footer-heading">Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="#home">Home</a></li>
                            <li><a href="#features">Features</a></li>
                            <li><a href="#documents">Documents</a></li>
                            <li><a href="#legalDatabase">Legal Database</a></li>
                            <li><a href="#lawyerDirectory">Find Lawyers</a></li>
                            <li><a href="#legalGuides">Legal Guides</a></li>
                            <li><a href="#testimonials">Testimonials</a></li>
                            <li><a href="#pricing">Pricing</a></li>
                        </ul>
                    </div>
                    
                    <!-- Legal -->
                    <div class="footer-section">
                        <h4 class="footer-heading">Legal</h4>
                        <ul class="footer-links">
                            <li><a href="#" id="termsLink">Terms of Service</a></li>
                            <li><a href="#" id="privacyLink">Privacy Policy</a></li>
                            <li><a href="#" id="disclaimerLink">Legal Disclaimer</a></li>
                            <li><a href="#" id="cookieLink">Cookie Policy</a></li>
                        </ul>
                    </div>
                    
                    <!-- Contact -->
                    <div class="footer-section">
                        <h4 class="footer-heading">Contact Us</h4>
                        <ul class="footer-contact">
                            <li>
                                <i class="fas fa-envelope"></i>
                                <a href="mailto:support@legalswami.com">support@legalswami.com</a>
                            </li>
                            <li>
                                <i class="fas fa-phone"></i>
                                <a href="tel:+919876543210">+91 9876543210</a>
                            </li>
                            <li>
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Mumbai, India</span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p class="copyright">
                        &copy; 2024 LegalSwami. All rights reserved.
                    </p>
                    <div class="disclaimer">
                        <i class="fas fa-exclamation-triangle"></i>
                        LegalSwami provides AI-powered legal assistance. It is not a substitute for professional legal advice.
                    </div>
                </div>
            </div>
        </footer>

        <!-- Back to Top -->
        <button id="backToTop" class="back-to-top">
            <i class="fas fa-chevron-up"></i>
        </button>
    </div>
    
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- Main App Script -->
    <script>
// =============================================
// LEGALSWAMI - COMPLETE UPDATED SCRIPT
// =============================================

// Global variables
let chatHistory = [];
let currentChatId = null;
let conversationHistory = [];
let isListening = false;
let recognition = null;
let chatInitialized = false;
let isGeneratingResponse = false;
let currentResponseTimer = null;
let stopResponseFlag = false;

// Welcome message HTML
const WELCOME_MESSAGE_HTML = `
    <div class="welcome-message">
        <h2>Welcome to LegalSwami</h2>
        <p>Your AI-powered legal assistant for accurate, comprehensive legal information and guidance.</p>
        
        <div class="legal-notice">
            <h4><i class="fas fa-exclamation-triangle"></i> Important Legal Notice</h4>
            <p style="font-size: 0.875rem; margin: 0; line-height: 1.5;">
                LegalSwami provides AI-generated legal information for educational purposes only. 
                This is not legal advice and does not establish an attorney-client relationship. 
                Always consult with a qualified attorney for legal advice specific to your situation.
            </p>
        </div>
        
        <p style="color: var(--court-gold); margin-top: 15px; font-size: 0.875rem;">
            <i class="fas fa-language"></i> Supports multiple Indian languages including Hindi, Marathi, Gujarati, and more!
        </p>
        
        <div style="margin-top: 1.5rem;">
            <h3 style="color: var(--court-gold); margin-bottom: 0.875rem; font-size: 1rem;">Ready-to-Use Legal Documents:</h3>
            <div class="draft-templates">
                <div class="draft-template" data-template="nda">
                    <i class="fas fa-file-signature"></i>
                    <h4>Non-Disclosure Agreement</h4>
                    <p>Confidentiality agreement template</p>
                </div>
                <div class="draft-template" data-template="employment">
                    <i class="fas fa-briefcase"></i>
                    <h4>Employment Contract</h4>
                    <p>Employee agreement template</p>
                </div>
                <div class="draft-template" data-template="rental">
                    <i class="fas fa-house"></i>
                    <h4>Rental Agreement</h4>
                    <p>Tenancy agreement template</p>
                </div>
                <div class="draft-template" data-template="loan">
                    <i class="fas fa-money-bill-wave"></i>
                    <h4>Loan Agreement</h4>
                    <p>Money lending agreement</p>
                </div>
            </div>
        </div>
        
        <div class="welcome-features">
            <div class="feature">
                <i class="fas fa-bolt"></i>
                <h4>Instant Responses</h4>
                <p>Get immediate legal insights powered by advanced AI</p>
            </div>
            <div class="feature">
                <i class="fas fa-shield-alt"></i>
                <h4>Confidential & Secure</h4>
                <p>Your conversations are private and encrypted</p>
            </div>
            <div class="feature">
                <i class="fas fa-language"></i>
                <h4>Multi-Language</h4>
                <p>Responds in same language as your query</p>
            </div>
        </div>
    </div>
`;

// =============================================
// CHAT FUNCTIONS
// =============================================

function openChat() {
    console.log("🚀 Opening chat...");
    
    // Add chat-active class to body
    document.body.classList.add('chat-active');
    
    // Show chat interface
    const chatInterface = document.getElementById('chatInterface');
    if (chatInterface) {
        chatInterface.style.display = 'flex';
        chatInterface.classList.add('active');
        
        // Force reflow
        chatInterface.offsetHeight;
        
        setTimeout(() => {
            chatInterface.style.opacity = '1';
            chatInterface.style.visibility = 'visible';
        }, 10);
    }
    
    // Initialize chat if not already
    if (!chatInitialized) {
        setTimeout(() => {
            initializeChatApp();
            chatInitialized = true;
            console.log("✅ Chat initialized");
        }, 100);
    }
    
    // Focus on input
    setTimeout(() => {
        const userInput = document.getElementById('userInput');
        if (userInput) {
            userInput.focus();
            userInput.style.color = 'var(--dark-text)';
            userInput.style.opacity = '1';
            userInput.style.visibility = 'visible';
        }
    }, 300);
    
    // Scroll to bottom
    setTimeout(() => {
        scrollToBottom();
    }, 500);
}

function closeChat() {
    console.log("🔙 Closing chat...");
    
    // Remove body class
    document.body.classList.remove('chat-active');
    
    // Hide chat interface
    const chatInterface = document.getElementById('chatInterface');
    if (chatInterface) {
        chatInterface.classList.remove('active');
        chatInterface.style.opacity = '0';
        chatInterface.style.visibility = 'hidden';
        
        setTimeout(() => {
            chatInterface.style.display = 'none';
        }, 300);
    }
}

// =============================================
// SCROLL FUNCTIONS
// =============================================

function scrollToBottom() {
    const chatMessages = document.getElementById('chatMessages');
    if (chatMessages) {
        chatMessages.scrollTop = chatMessages.scrollHeight;
        hideScrollToBottomButton();
    }
}

function checkScrollPosition() {
    const chatMessages = document.getElementById('chatMessages');
    const scrollToBottomBtn = document.getElementById('scrollToBottomBtn');
    
    if (chatMessages && scrollToBottomBtn) {
        const isAtBottom = chatMessages.scrollHeight - chatMessages.scrollTop - chatMessages.clientHeight < 100;
        
        if (isAtBottom) {
            scrollToBottomBtn.classList.remove('visible');
        } else {
            scrollToBottomBtn.classList.add('visible');
        }
    }
}

function hideScrollToBottomButton() {
    const scrollToBottomBtn = document.getElementById('scrollToBottomBtn');
    if (scrollToBottomBtn) {
        scrollToBottomBtn.classList.remove('visible');
    }
}

// =============================================
// INITIALIZATION FUNCTIONS
// =============================================

function initializeAppForGuest() {
    console.log("👤 Initializing in guest mode...");
    
    // Load user preferences
    loadUserChatHistory();
    
    showToast('Welcome to LegalSwami! Start your free legal consultation now.', 'info');
}

// =============================================
// CHAT HISTORY FUNCTIONS
// =============================================

function loadUserChatHistory() {
    try {
        const savedHistory = localStorage.getItem('legalSwamiChatHistory');
        if (savedHistory) {
            chatHistory = JSON.parse(savedHistory);
        }
        
        const savedChatId = localStorage.getItem('legalSwamiCurrentChatId');
        if (savedChatId) {
            currentChatId = savedChatId;
            const currentChat = chatHistory.find(chat => chat.id === currentChatId);
            if (currentChat) {
                conversationHistory = [...currentChat.messages];
            }
        }
    } catch (error) {
        console.error('Error loading chat history:', error);
        chatHistory = [];
    }
}

function saveUserChatHistory() {
    try {
        localStorage.setItem('legalSwamiChatHistory', JSON.stringify(chatHistory));
        localStorage.setItem('legalSwamiCurrentChatId', currentChatId);
    } catch (error) {
        console.error('Error saving chat history:', error);
    }
}

// =============================================
// MAIN CHAT APP INITIALIZATION
// =============================================

function initializeChatApp() {
    console.log("🤖 Initializing chat app...");
    
    try {
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');
        const newChatBtn = document.getElementById('newChatBtn');
        const newChatBtnHeader = document.getElementById('newChatBtnHeader');
        const backToHomeBtn = document.getElementById('backToHomeBtn');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const topicItems = document.querySelectorAll('.topic-item');
        const sidebarTabs = document.querySelectorAll('.sidebar-tab');
        const scrollToBottomBtn = document.getElementById('scrollToBottomBtn');
        const inputMicrophoneBtn = document.getElementById('inputMicrophoneBtn');
        const attachmentBtn = document.getElementById('attachmentBtn');

        // FIX: Ensure text input is visible
        if (userInput) {
            userInput.style.color = 'var(--dark-text)';
            userInput.style.opacity = '1';
            userInput.style.visibility = 'visible';
            userInput.style.background = 'linear-gradient(135deg, var(--court-parchment) 0%, var(--dark-surface) 100%)';
        }

        // Load or create chat
        if (!currentChatId || conversationHistory.length === 0) {
            createNewChat();
        } else {
            loadCurrentChatMessages();
        }

        // Send button click
        if (sendButton) {
            sendButton.addEventListener('click', sendMessage);
        }
        
        // User input keydown
        if (userInput) {
            userInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && e.ctrlKey) {
                    e.preventDefault();
                    sendMessage();
                }
                
                if (e.key === 'Enter' && !e.ctrlKey && !e.shiftKey) {
                    // Allow new lines with Shift+Enter
                    if (this.value.trim()) {
                        e.preventDefault();
                        sendMessage();
                    }
                }
                
                setTimeout(() => {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 200) + 'px';
                }, 10);
            });
            
            userInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 200) + 'px';
                sendButton.disabled = this.value.trim() === '';
            });
        }

        // Voice recognition setup
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = true;
            recognition.lang = 'en-IN,hi-IN,mr-IN,gu-IN,ta-IN';
            
            recognition.onstart = function() {
                isListening = true;
                showToast('Listening... Speak now 🎤', 'info');
                if (inputMicrophoneBtn) inputMicrophoneBtn.classList.add('listening');
            };
            
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                if (event.results[0].isFinal && userInput) {
                    userInput.value = transcript;
                    userInput.style.height = Math.min(userInput.scrollHeight, 200) + 'px';
                    sendButton.disabled = false;
                }
            };
            
            recognition.onerror = function(event) {
                console.error('Speech recognition error:', event.error);
                isListening = false;
                showToast('Voice recognition failed. Please try again. ❌', 'error');
                if (inputMicrophoneBtn) inputMicrophoneBtn.classList.remove('listening');
            };
            
            recognition.onend = function() {
                isListening = false;
                if (inputMicrophoneBtn) inputMicrophoneBtn.classList.remove('listening');
            };
            
            if (inputMicrophoneBtn) {
                inputMicrophoneBtn.addEventListener('click', function() {
                    if (isListening) {
                        recognition.stop();
                    } else {
                        recognition.start();
                    }
                });
            }
        } else {
            if (inputMicrophoneBtn) inputMicrophoneBtn.style.display = 'none';
        }
        
        // Sidebar toggle for mobile
        if (sidebarToggle) {
            sidebarToggle.addEventListener('click', function() {
                const sidebar = document.getElementById('sidebar');
                if (sidebar) {
                    sidebar.classList.toggle('active');
                }
            });
        }
        
        // Sidebar tab switching
        sidebarTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.dataset.tab;
                sidebarTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                const tabContent = document.getElementById(`${tabId}-content`);
                if (tabContent) tabContent.classList.add('active');
                
                if (tabId === 'chat-history') {
                    loadHistoryList();
                }
            });
        });
        
        // New chat button in sidebar
        if (newChatBtn) newChatBtn.addEventListener('click', createNewChat);
        
        // New chat button in header
        if (newChatBtnHeader) newChatBtnHeader.addEventListener('click', createNewChat);
        
        // Back to home button
        if (backToHomeBtn) {
            backToHomeBtn.addEventListener('click', closeChat);
        }
        
        // Scroll to bottom button
        if (scrollToBottomBtn) {
            scrollToBottomBtn.addEventListener('click', scrollToBottom);
        }
        
        // Chat messages scroll event
        if (chatMessages) {
            chatMessages.addEventListener('scroll', checkScrollPosition);
        }
        
        // Download modal close
        const closeDownloadModal = document.getElementById('closeDownloadModal');
        if (closeDownloadModal) {
            closeDownloadModal.addEventListener('click', function() {
                const downloadModal = document.getElementById('downloadModal');
                if (downloadModal) downloadModal.classList.remove('active');
            });
        }
        
        // Download options
        const downloadOptions = document.querySelectorAll('.download-option');
        downloadOptions.forEach(option => {
            option.addEventListener('click', function() {
                const format = this.dataset.format;
                downloadChat(format);
                const downloadModal = document.getElementById('downloadModal');
                if (downloadModal) downloadModal.classList.remove('active');
            });
        });
        
        // Topic click handlers
        topicItems.forEach(item => {
            item.addEventListener('click', function() {
                const topic = this.dataset.topic;
                const topicName = this.querySelector('span').textContent;
                const questions = {
                    'contract': 'What are the essential elements of a valid contract under Indian law? ⚖️',
                    'employment': 'What are the rights of employees regarding workplace harassment in India? 💼',
                    'intellectual': 'How does copyright protection work for software in India? 🧠',
                    'realestate': 'What documents are required for property registration in India? 🏠',
                    'family': 'What are the grounds for divorce under Hindu Marriage Act? 👨‍👩‍👧',
                    'criminal': 'What is the difference between bailable and non-bailable offenses? ⚖️'
                };
                if (userInput) {
                    userInput.value = questions[topic] || `Tell me about ${topicName.toLowerCase()} in Indian law. ⚖️`;
                    userInput.focus();
                    userInput.style.height = Math.min(userInput.scrollHeight, 200) + 'px';
                }
                if (sendButton) sendButton.disabled = false;
                showToast(`${topicName} topic selected 📂`, 'success');
            });
        });
        
        // Draft template click handlers
        document.addEventListener('click', function(e) {
            if (e.target.closest('.draft-template')) {
                const template = e.target.closest('.draft-template').dataset.template;
                const templateNames = {
                    'nda': 'Non-Disclosure Agreement',
                    'employment': 'Employment Contract',
                    'rental': 'Rental Agreement',
                    'loan': 'Loan Agreement'
                };
                
                if (userInput) {
                    userInput.value = `Generate a ${templateNames[template]} template for me.`;
                    userInput.focus();
                    userInput.style.height = Math.min(userInput.scrollHeight, 200) + 'px';
                    sendButton.disabled = false;
                    showToast(`${templateNames[template]} selected! Click Send to generate.`, 'success');
                }
            }
        });
        
        // Focus input on load
        setTimeout(() => {
            if (userInput) {
                userInput.focus();
                userInput.style.color = 'var(--dark-text)';
                userInput.style.opacity = '1';
                userInput.style.visibility = 'visible';
            }
        }, 300);
        
        console.log("✅ Chat app initialized successfully");
        chatInitialized = true;
        
    } catch (error) {
        console.error("❌ Error initializing chat app:", error);
    }
}

// =============================================
// CHAT MESSAGE FUNCTIONS
// =============================================

function loadCurrentChatMessages() {
    const chatMessages = document.getElementById('chatMessages');
    if (!chatMessages) return;
    
    chatMessages.innerHTML = '';
    
    if (conversationHistory.length === 0) {
        const welcomeContainer = document.createElement('div');
        welcomeContainer.innerHTML = WELCOME_MESSAGE_HTML;
        chatMessages.appendChild(welcomeContainer);
        return;
    }
    
    conversationHistory.forEach(msg => {
        addMessageToChat(msg.content, msg.role === 'user', true);
    });
    
    setTimeout(() => {
        scrollToBottom();
    }, 100);
}

function createNewChat() {
    currentChatId = 'chat_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    conversationHistory = [];
    
    const chatMessages = document.getElementById('chatMessages');
    if (chatMessages) {
        const welcomeContainer = document.createElement('div');
        welcomeContainer.innerHTML = WELCOME_MESSAGE_HTML;
        chatMessages.innerHTML = '';
        chatMessages.appendChild(welcomeContainer);
    }
    
    // Close sidebar on mobile
    const sidebar = document.getElementById('sidebar');
    if (sidebar && window.innerWidth <= 992) {
        sidebar.classList.remove('active');
    }
    
    showToast('New chat started 💬', 'success');
    setTimeout(() => {
        scrollToBottom();
    }, 100);
}

function addMessageToChat(content, isUser, fromHistory = false, isTyping = false) {
    const chatMessages = document.getElementById('chatMessages');
    
    // Remove welcome message if this is a new user message
    if (!fromHistory && isUser && chatMessages) {
        const welcomeMessage = document.querySelector('.welcome-message');
        if (welcomeMessage) {
            welcomeMessage.remove();
        }
    }
    
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
    const messageId = 'msg_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    messageDiv.id = messageId;
    
    const avatar = document.createElement('div');
    avatar.className = 'avatar';
    if (isUser) {
        avatar.innerHTML = '<i class="fas fa-user"></i>';
    } else {
        avatar.innerHTML = '<i class="fas fa-scale-balanced"></i>';
    }
    
    const messageContent = document.createElement('div');
    messageContent.className = 'message-content';
    
    const messageText = document.createElement('div');
    messageText.className = 'message-text';
    
    if (isTyping) {
        messageText.innerHTML = `<div class="typing-indicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <span style="margin-left: 10px; color: var(--court-gold);">Thinking...</span>
        </div>`;
    } else {
        messageText.innerHTML = content.replace(/\n/g, '<br>');
    }
    
    messageContent.appendChild(messageText);
    
    // Add action buttons (not for typing indicators)
    if (!isTyping) {
        const messageActions = document.createElement('div');
        messageActions.className = 'message-actions';
        
        if (isUser) {
            // User message actions: Copy and Edit
            messageActions.innerHTML = `
                <button class="action-btn copy" onclick="copyMessage(this)" title="Copy message">
                    <i class="fas fa-copy"></i> <span class="hide-on-mobile">Copy</span>
                </button>
                <button class="action-btn edit" onclick="editMessage(this)" title="Edit message">
                    <i class="fas fa-edit"></i> <span class="hide-on-mobile">Edit</span>
                </button>
            `;
        } else {
            // AI message actions: Copy, Regenerate, Helpful, Not Helpful, Share, Download
            messageActions.innerHTML = `
                <button class="action-btn copy" onclick="copyMessage(this)" title="Copy response">
                    <i class="fas fa-copy"></i> <span class="hide-on-mobile">Copy</span>
                </button>
                <button class="action-btn regenerate" onclick="regenerateMessage(this)" title="Regenerate response">
                    <i class="fas fa-redo"></i> <span class="hide-on-mobile">Regenerate</span>
                </button>
                <button class="action-btn like" onclick="rateMessage(this, 'helpful')" title="Mark as helpful">
                    <i class="far fa-thumbs-up"></i> <span class="hide-on-mobile">Helpful</span>
                </button>
                <button class="action-btn dislike" onclick="rateMessage(this, 'not-helpful')" title="Mark as not helpful">
                    <i class="far fa-thumbs-down"></i> <span class="hide-on-mobile">Not Helpful</span>
                </button>
                <button class="action-btn share" onclick="shareMessage(this)" title="Share response">
                    <i class="fas fa-share"></i> <span class="hide-on-mobile">Share</span>
                </button>
                <div class="download-dropdown">
                    <button class="action-btn download" onclick="toggleDownloadDropdown(this)" title="Download options">
                        <i class="fas fa-download"></i> <span class="hide-on-mobile">Download</span>
                    </button>
                    <div class="download-options-menu">
                        <button class="download-option-btn" onclick="downloadMessage(this, 'word')">
                            <i class="fas fa-file-word"></i> Word (.doc)
                        </button>
                        <button class="download-option-btn" onclick="downloadMessage(this, 'pdf')">
                            <i class="fas fa-file-pdf"></i> PDF (.pdf)
                        </button>
                        <button class="download-option-btn" onclick="downloadMessage(this, 'text')">
                            <i class="fas fa-file-alt"></i> Text (.txt)
                        </button>
                    </div>
                </div>
            `;
        }
        
        messageContent.appendChild(messageActions);
    }
    
    messageDiv.appendChild(avatar);
    messageDiv.appendChild(messageContent);
    
    if (chatMessages) {
        chatMessages.appendChild(messageDiv);
        
        // Scroll to bottom
        setTimeout(() => {
            chatMessages.scrollTop = chatMessages.scrollHeight;
            checkScrollPosition();
        }, 100);
    }
    
    return messageId;
}

function sendMessage() {
    const userInput = document.getElementById('userInput');
    const sendButton = document.getElementById('sendButton');
    
    if (!userInput || !sendButton) return;
    
    const message = userInput.value.trim();
    
    if (!message) {
        showToast('Please enter a message 📝', 'warning');
        return;
    }
    
    if (isListening && recognition) {
        recognition.stop();
    }
    
    // Clear stop flag
    stopResponseFlag = false;
    
    const messageId = addMessageToChat(message, true);
    userInput.value = '';
    userInput.style.height = '56px';
    sendButton.disabled = true;
    
    // Add user message to history
    const userMessage = {
        role: 'user',
        content: message,
        timestamp: new Date().toISOString()
    };
    conversationHistory.push(userMessage);
    
    // Show typing indicator
    const typingIndicatorId = addMessageToChat('', false, false, true);
    isGeneratingResponse = true;
    
    // Change send button to stop button
    sendButton.innerHTML = '<i class="fas fa-stop"></i> <span class="hide-on-mobile">Stop</span>';
    sendButton.onclick = stopResponse;
    
    // Simulate AI response with realistic typing
    simulateRealisticResponse(message, typingIndicatorId, messageId);
    
    // Save chat
    saveCurrentChat();
}

function stopResponse() {
    if (isGeneratingResponse) {
        stopResponseFlag = true;
        isGeneratingResponse = false;
        
        // Change stop button back to send button
        const sendButton = document.getElementById('sendButton');
        if (sendButton) {
            sendButton.innerHTML = '<i class="fas fa-paper-plane"></i> <span class="hide-on-mobile">Send</span>';
            sendButton.onclick = sendMessage;
            sendButton.disabled = true;
        }
        
        showToast('Response stopped ⏹️', 'info');
        
        // Clear any pending timers
        if (currentResponseTimer) {
            clearTimeout(currentResponseTimer);
            currentResponseTimer = null;
        }
    }
}

function simulateRealisticResponse(userMessage, typingIndicatorId, userMessageId) {
    // Generate AI response
    const aiResponse = generateAIResponse(userMessage);
    
    // Remove typing indicator
    const typingElement = document.getElementById(typingIndicatorId);
    if (typingElement) typingElement.remove();
    
    // Add AI message with typewriter effect
    const aiMessageId = addMessageToChat('', false);
    const aiMessageElement = document.getElementById(aiMessageId);
    const messageText = aiMessageElement.querySelector('.message-text');
    
    let index = 0;
    const speed = 20; // Typing speed in milliseconds
    const aiResponseWithBreaks = aiResponse.replace(/\n/g, '<br>');
    
    function typeWriter() {
        if (stopResponseFlag) {
            // Add stopped indicator
            messageText.innerHTML += '<br><br><em>Response stopped by user.</em>';
            finalizeAIResponse(aiMessageId, aiResponse);
            return;
        }
        
        if (index < aiResponseWithBreaks.length) {
            const char = aiResponseWithBreaks.charAt(index);
            if (char === '<') {
                // Handle HTML tags
                const tagEnd = aiResponseWithBreaks.indexOf('>', index);
                if (tagEnd !== -1) {
                    const tag = aiResponseWithBreaks.substring(index, tagEnd + 1);
                    messageText.innerHTML += tag;
                    index = tagEnd + 1;
                } else {
                    messageText.innerHTML += char;
                    index++;
                }
            } else {
                messageText.innerHTML += char;
                index++;
            }
            
            // Scroll to bottom during typing
            scrollToBottom();
            
            // Continue typing
            currentResponseTimer = setTimeout(typeWriter, speed);
        } else {
            // Typing complete
            finalizeAIResponse(aiMessageId, aiResponse);
        }
    }
    
    // Start typing
    currentResponseTimer = setTimeout(typeWriter, 500); // Initial delay
}

function finalizeAIResponse(messageId, fullResponse) {
    isGeneratingResponse = false;
    
    // Add AI message to history
    const aiMessage = {
        role: 'assistant',
        content: fullResponse,
        timestamp: new Date().toISOString()
    };
    conversationHistory.push(aiMessage);
    
    // Change stop button back to send button
    const sendButton = document.getElementById('sendButton');
    if (sendButton) {
        sendButton.innerHTML = '<i class="fas fa-paper-plane"></i> <span class="hide-on-mobile">Send</span>';
        sendButton.onclick = sendMessage;
        sendButton.disabled = true;
    }
    
    // Save chat
    saveCurrentChat();
    
    // Clear timer
    if (currentResponseTimer) {
        clearTimeout(currentResponseTimer);
        currentResponseTimer = null;
    }
}

function generateAIResponse(message) {
    const lowerMessage = message.toLowerCase();
    
    // Contract Law Responses
    if (lowerMessage.includes('contract') || lowerMessage.includes('agreement')) {
        return `**Contract Law Information** ⚖️

### Essential Elements of a Valid Contract in India:
1. **Offer and Acceptance** - Clear proposal and unconditional acceptance
2. **Intention to Create Legal Relations** - Parties must intend legal consequences
3. **Lawful Consideration** - Something of value exchanged
4. **Capacity of Parties** - Parties must be competent (18+ years, sound mind)
5. **Free Consent** - Without coercion, undue influence, fraud, misrepresentation, or mistake
6. **Lawful Object** - Purpose must not be illegal, immoral, or opposed to public policy
7. **Certainty and Possibility of Performance** - Terms must be clear and performance possible

### Key Statutes:
- Indian Contract Act, 1872
- Specific Relief Act, 1963
- Sale of Goods Act, 1930

### Sample Clause for Reference:
> "The parties hereby agree to the terms outlined herein, which shall be governed by and construed in accordance with the laws of India. Any disputes arising under this agreement shall be subject to the exclusive jurisdiction of the courts in [City, State]."

⚠️ **Important Notice**: This information is for educational purposes only. Always consult with a qualified attorney for contract drafting and legal advice specific to your situation.`;
    }
    
    // Rental Agreement Responses
    if (lowerMessage.includes('rental') || lowerMessage.includes('lease') || lowerMessage.includes('tenant')) {
        return `**Rental Agreement Guide** 🏠

### Key Components for a Rental Agreement in India:

#### 1. **Parties' Details**
   - Full names, addresses, and identification details
   - Contact information for both landlord and tenant

#### 2. **Property Description**
   - Complete address with flat/house number
   - Area/size of the property
   - Amenities included (furniture, appliances, etc.)

#### 3. **Term and Duration**
   - Start and end dates
   - Renewal terms and conditions
   - Notice period for termination

#### 4. **Rent and Payment Terms**
   - Monthly rent amount
   - Due date for payment
   - Mode of payment (bank transfer, cheque, etc.)
   - Late payment penalties

#### 5. **Security Deposit**
   - Amount (typically 1-3 months' rent)
   - Refund conditions and timeline
   - Deductions allowed (repairs, unpaid bills)

#### 6. **Maintenance Responsibilities**
   - Who pays for repairs and maintenance
   - Regular upkeep responsibilities
   - Utility bills (electricity, water, gas, internet)

#### 7. **Restrictions and Rules**
   - Subletting restrictions
   - Commercial use limitations
   - Pet policies
   - Visitor policies

### **Important Legal Requirements:**
- **Stamp Duty**: Varies by state (typically 0.25%-2% of annual rent)
- **Registration**: Mandatory if agreement exceeds 11 months
- **Rent Control Laws**: Applicable in certain cities/states

### **Sample Clause:**
> "The tenant shall pay a security deposit of ₹[Amount], refundable at the end of the tenancy after deducting any outstanding dues or damages beyond normal wear and tear."

🔍 **Note**: Stamp duty rates and registration requirements vary by state. Consult local regulations or a legal professional.`;
    }
    
    // NDA Responses
    if (lowerMessage.includes('nda') || lowerMessage.includes('non-disclosure') || lowerMessage.includes('confidential')) {
        return `**Non-Disclosure Agreement (NDA) Information** 🔐

### Key Elements of an Effective NDA:

#### 1. **Definition of Confidential Information**
   - Specific description of what constitutes confidential information
   - Examples: business plans, customer lists, technical data, trade secrets
   - Exclusions: publicly available information, independently developed information

#### 2. **Obligations of Receiving Party**
   - Duty to maintain confidentiality
   - Restrictions on use (only for specified purpose)
   - Security measures required
   - Limitations on disclosure (only to authorized personnel)

#### 3. **Term of Confidentiality**
   - Duration of obligation (typically 2-5 years)
   - Survival of obligations after agreement termination
   - Return/destruction of materials upon request

#### 4. **Exceptions to Confidentiality**
   - Information that becomes publicly known
   - Information received from third parties
   - Information required by law or court order
   - Information developed independently

#### 5. **Remedies for Breach**
   - Injunctive relief provisions
   - Monetary damages
   - Attorney's fees for prevailing party
   - Specific performance rights

#### 6. **Governing Law and Jurisdiction**
   - Choice of law (typically state where disclosing party is located)
   - Jurisdiction for disputes
   - Arbitration/mediation provisions

### **Types of NDAs:**
- **Unilateral NDA**: One party discloses information
- **Bilateral/Mutual NDA**: Both parties exchange confidential information
- **Multilateral NDA**: Three or more parties involved

### **Critical Considerations:**
1. **Scope**: Clearly define what's confidential
2. **Duration**: Realistic timeframes for confidentiality
3. **Exclusions**: Protect your right to use public information
4. **Remedies**: Ensure adequate protection for breaches

### **Sample Clause:**
> "The Receiving Party agrees to hold the Confidential Information in strict confidence and to take all reasonable precautions to protect such Confidential Information, including ensuring that all employees, agents, and representatives who have access to the Confidential Information are bound by similar confidentiality obligations."

⚖️ **Legal Advice**: NDAs should be tailored to specific business needs and reviewed by legal counsel.`;
    }
    
    // General Legal Responses
    const generalResponses = [
        `**Legal Guidance Based on Your Query** 📚

Based on Indian law, I can provide you with the following information:

### **Key Principles to Consider:**
1. **Document Everything** - Maintain written records of all communications and agreements
2. **Understand Relevant Statutes** - Different laws apply based on the subject matter
3. **Consider Jurisdiction** - Laws vary by state; ensure you're following local regulations
4. **Be Aware of Limitation Periods** - Legal actions have specific time limits (typically 3 years for civil matters)
5. **Preserve Evidence** - Keep all relevant documents, emails, and records

### **Common Legal Resources:**
- **Bare Acts**: Official texts of legislation
- **Case Laws**: Judicial interpretations and precedents
- **Legal Commentaries**: Expert analysis of laws
- **Government Portals**: Official websites for forms and procedures

### **Important Disclaimer:**
⚠️ **This is AI-generated information for educational purposes only. It is not legal advice and does not establish an attorney-client relationship.**

### **Next Steps:**
1. Consult with a qualified attorney for personalized advice
2. Review all documents with legal counsel
3. Consider mediation/arbitration for dispute resolution
4. Stay informed about legal updates relevant to your situation

**Remember**: Legal matters can be complex. Professional legal advice is essential for making informed decisions.`,

        `**Understanding Your Legal Query** 🔍

I understand you're asking about legal matters. Here's some general guidance that may be helpful:

### **Basic Legal Framework in India:**
• **Constitution of India** - Supreme law of the land
• **Central Acts** - Apply nationwide (IPC, CrPC, Evidence Act, etc.)
• **State Laws** - Vary by state (property, rent, agricultural laws)
• **Subsidiary Legislation** - Rules, regulations, and notifications
• **Judicial Precedents** - Binding decisions from higher courts

### **Practical Considerations:**
• **Cost-Benefit Analysis** - Consider time, money, and emotional costs
• **Alternative Dispute Resolution** - Mediation and arbitration can be faster and cheaper
• **Legal Aid** - Available for those who cannot afford representation
• **Pro Bono Services** - Many lawyers offer free services for deserving cases

### **Document Preparation Tips:**
✓ Use clear, unambiguous language
✓ Include all relevant dates and amounts
✓ Specify governing law and jurisdiction
✓ Include dispute resolution mechanisms
✓ Have documents witnessed and properly executed

### **Warning Signs to Watch For:**
❌ Vague or ambiguous terms
❌ Missing essential clauses
❌ Unfair or one-sided provisions
❌ Lack of termination clauses
❌ Inadequate dispute resolution mechanisms

### **Professional Assistance:**
Always consult with a licensed attorney who specializes in the relevant area of law. They can provide advice tailored to your specific circumstances and jurisdiction.`,

        `**Legal Information Response** ⚡

Thank you for your legal query. Based on Indian legal principles, here's what you should know:

### **Legal Research Methodology:**
1. **Identify the Issue** - Clearly define the legal question
2. **Find Relevant Statutes** - Locate applicable laws and amendments
3. **Check Case Law** - Look for judicial interpretations
4. **Review Secondary Sources** - Commentaries, articles, and expert opinions
5. **Verify Currency** - Ensure information is up-to-date

### **Common Legal Procedures:**
• **Filing a Case** - Proper court, correct format, required fees
• **Document Submission** - Affidavits, evidence, supporting documents
• **Hearings** - Court appearances, arguments, submissions
• **Judgment** - Court decision and reasoning
• **Appeal Process** - Time limits and procedures for appeals

### **Important Legal Concepts:**
• **Burden of Proof** - Who must prove what
• **Standard of Proof** - Level of evidence required
• **Res Judicata** - Matter already decided
• **Stare Decisis** - Following precedent
• **Natural Justice** - Fair hearing, unbiased tribunal

### **Legal Ethics Considerations:**
✓ Confidentiality of client information
✓ Conflict of interest avoidance
✓ Competent representation
✓ Honesty with court and clients
✓ Reasonable fees and billing

### **Final Note:**
This information is provided for educational purposes only. For legal advice specific to your situation, please consult with a qualified legal professional who can consider all relevant facts and circumstances.

**Legal matters require professional attention. Don't hesitate to seek proper legal counsel when needed.**`
    ];
    
    return generalResponses[Math.floor(Math.random() * generalResponses.length)];
}

function saveCurrentChat() {
    if (!currentChatId || conversationHistory.length === 0) return;
    
    let title = 'New Chat';
    let preview = 'No messages yet';
    
    if (conversationHistory.length > 0) {
        const firstUserMessage = conversationHistory.find(msg => msg.role === 'user');
        if (firstUserMessage) {
            title = firstUserMessage.content.substring(0, 30);
            if (firstUserMessage.content.length > 30) {
                title += '...';
            }
        }
        
        const lastMessage = conversationHistory[conversationHistory.length - 1];
        if (lastMessage) {
            preview = lastMessage.content.substring(0, 60).replace(/[#*`]/g, '');
            if (lastMessage.content.length > 60) {
                preview += '...';
            }
        }
    }
    
    const chatData = {
        id: currentChatId,
        title: title,
        preview: preview,
        date: new Date().toISOString(),
        messages: [...conversationHistory]
    };
    
    const chatIndex = chatHistory.findIndex(chat => chat.id === currentChatId);
    if (chatIndex !== -1) {
        chatHistory[chatIndex] = chatData;
    } else {
        chatHistory.unshift(chatData);
        
        // Keep only last 50 chats
        if (chatHistory.length > 50) {
            chatHistory = chatHistory.slice(0, 50);
        }
    }
    
    saveUserChatHistory();
}

function loadHistoryList() {
    const historyList = document.getElementById('historyList');
    if (!historyList) return;
    
    if (chatHistory.length === 0) {
        historyList.innerHTML = `
            <div class="empty-history">
                <i class="fas fa-comments"></i>
                <p>No chat history yet</p>
                <p style="font-size: 0.75rem; margin-top: 0.4rem;">Start a conversation to see it here</p>
            </div>
        `;
        return;
    }
    
    let html = '';
    chatHistory.forEach(chat => {
        const isActive = chat.id === currentChatId;
        const date = new Date(chat.date);
        const formattedDate = date.toLocaleDateString('en-IN', { 
            day: 'numeric', 
            month: 'short', 
            year: 'numeric' 
        }) + ' • ' + date.toLocaleTimeString('en-IN', { 
            hour: '2-digit', 
            minute: '2-digit' 
        });
        
        html += `
            <div class="history-item ${isActive ? 'active' : ''}" data-chat-id="${chat.id}">
                <div class="history-title">${chat.title}</div>
                <div class="history-preview">${chat.preview}</div>
                <div class="history-date"><i class="far fa-clock"></i> ${formattedDate}</div>
                <div class="history-actions">
                    <button class="history-action-btn open" onclick="loadChatFromHistory('${chat.id}')">
                        <i class="fas fa-external-link-alt"></i> Open
                    </button>
                    <button class="history-action-btn delete" onclick="deleteChatFromHistory('${chat.id}')">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        `;
    });
    
    historyList.innerHTML = html;
}

function loadChatFromHistory(chatId) {
    const chat = chatHistory.find(c => c.id === chatId);
    if (!chat) return;
    
    currentChatId = chatId;
    conversationHistory = [...chat.messages];
    
    const chatMessages = document.getElementById('chatMessages');
    if (chatMessages) {
        chatMessages.innerHTML = '';
        chat.messages.forEach(msg => {
            addMessageToChat(msg.content, msg.role === 'user', true);
        });
    }
    
    loadHistoryList();
    showToast('Chat loaded from history 📚', 'success');
    setTimeout(() => {
        scrollToBottom();
    }, 100);
}

function deleteChatFromHistory(chatId) {
    if (!confirm('Are you sure you want to delete this chat? This action cannot be undone.')) {
        return;
    }
    
    // If deleting current chat, create new one
    if (currentChatId === chatId) {
        createNewChat();
    }
    
    // Remove from history
    chatHistory = chatHistory.filter(chat => chat.id !== chatId);
    saveUserChatHistory();
    
    // Update UI
    loadHistoryList();
    showToast('Chat deleted successfully 🗑️', 'success');
}

// =============================================
// MESSAGE ACTION FUNCTIONS
// =============================================

// Global function for copying messages
window.copyMessage = function(button) {
    const messageText = button.closest('.message-content').querySelector('.message-text');
    let textToCopy = messageText.textContent || messageText.innerText;
    
    // Create a temporary textarea element
    const textarea = document.createElement('textarea');
    textarea.value = textToCopy;
    textarea.style.position = 'fixed';
    textarea.style.opacity = '0';
    document.body.appendChild(textarea);
    textarea.select();
    textarea.setSelectionRange(0, 99999); // For mobile devices
    
    try {
        const successful = document.execCommand('copy');
        if (successful) {
            showToast('Response copied to clipboard! 📋', 'success');
            
            // Visual feedback
            button.innerHTML = '<i class="fas fa-check"></i> Copied!';
            button.style.background = 'linear-gradient(135deg, var(--success) 0%, #059669 100%)';
            button.style.color = 'white';
            
            setTimeout(() => {
                button.innerHTML = '<i class="fas fa-copy"></i> Copy';
                button.style.background = '';
                button.style.color = '';
            }, 2000);
        }
    } catch (err) {
        console.error('Copy failed:', err);
        showToast('Copy failed. Please select and copy manually.', 'error');
    }
    
    document.body.removeChild(textarea);
};

// Edit message function - FIXED: Now continues response after edit
window.editMessage = function(button) {
    const messageText = button.closest('.message-content').querySelector('.message-text');
    const originalText = messageText.textContent;
    
    // Create edit textarea
    const textarea = document.createElement('textarea');
    textarea.value = originalText;
    textarea.style.width = '100%';
    textarea.style.minHeight = '100px';
    textarea.style.padding = '0.75rem';
    textarea.style.borderRadius = '8px';
    textarea.style.border = '1px solid var(--court-gold)';
    textarea.style.background = 'rgba(255, 255, 255, 0.05)';
    textarea.style.color = 'var(--dark-text)';
    textarea.style.fontFamily = 'inherit';
    textarea.style.fontSize = '0.9375rem';
    
    // Replace message text with textarea
    messageText.style.display = 'none';
    messageText.parentNode.insertBefore(textarea, messageText);
    
    // Create save/cancel buttons
    const editControls = document.createElement('div');
    editControls.style.marginTop = '0.75rem';
    editControls.style.display = 'flex';
    editControls.style.gap = '0.5rem';
    editControls.innerHTML = `
        <button class="action-btn" onclick="saveEditedMessage(this)" style="background: var(--success); color: white;">
            <i class="fas fa-check"></i> Save & Send
        </button>
        <button class="action-btn" onclick="cancelEdit(this)" style="background: var(--error); color: white;">
            <i class="fas fa-times"></i> Cancel
        </button>
    `;
    
    button.parentNode.appendChild(editControls);
    button.style.display = 'none';
    
    // Also hide other buttons
    const otherButtons = button.parentNode.querySelectorAll('.action-btn:not(.copy)');
    otherButtons.forEach(btn => btn.style.display = 'none');
};

window.saveEditedMessage = function(button) {
    const messageContent = button.closest('.message-content');
    const textarea = messageContent.querySelector('textarea');
    const messageText = messageContent.querySelector('.message-text');
    const editControls = button.closest('div');
    
    if (textarea && messageText) {
        const editedText = textarea.value.trim();
        
        if (!editedText) {
            showToast('Message cannot be empty', 'error');
            return;
        }
        
        // Update the message in conversation history
        const messageDiv = messageContent.closest('.message');
        const isUserMessage = messageDiv.classList.contains('user-message');
        
        // Find and update in conversation history
        const messageIndex = conversationHistory.findIndex(msg => 
            msg.role === (isUserMessage ? 'user' : 'assistant') && 
            msg.content === messageText.textContent
        );
        
        if (messageIndex !== -1) {
            conversationHistory[messageIndex].content = editedText;
            saveCurrentChat();
        }
        
        // Update UI
        messageText.textContent = editedText;
        messageText.style.display = 'block';
        textarea.remove();
        editControls.remove();
        
        // Show all buttons again
        const actionButtons = messageContent.querySelectorAll('.message-actions .action-btn');
        actionButtons.forEach(btn => btn.style.display = 'flex');
        
        showToast('Message updated successfully ✏️', 'success');
        
        // If this is a user message, get new AI response
        if (isUserMessage) {
            // Find and remove the AI response that followed this message
            const messageDivIndex = Array.from(messageDiv.parentNode.children).indexOf(messageDiv);
            const nextMessageDiv = messageDiv.parentNode.children[messageDivIndex + 1];
            
            if (nextMessageDiv && nextMessageDiv.classList.contains('ai-message')) {
                // Remove AI message from DOM
                nextMessageDiv.remove();
                
                // Remove from conversation history
                const aiMessageIndex = conversationHistory.findIndex((msg, idx) => 
                    idx > messageIndex && msg.role === 'assistant'
                );
                
                if (aiMessageIndex !== -1) {
                    conversationHistory.splice(aiMessageIndex, 1);
                }
            }
            
            // Send the edited message to get new AI response
            setTimeout(() => {
                const userInput = document.getElementById('userInput');
                const sendButton = document.getElementById('sendButton');
                if (userInput && sendButton) {
                    userInput.value = editedText;
                    userInput.style.height = Math.min(userInput.scrollHeight, 200) + 'px';
                    sendButton.disabled = false;
                    sendMessage();
                }
            }, 500);
        }
    }
};

window.cancelEdit = function(button) {
    const messageContent = button.closest('.message-content');
    const textarea = messageContent.querySelector('textarea');
    const messageText = messageContent.querySelector('.message-text');
    const editControls = button.closest('div');
    
    if (textarea && messageText) {
        messageText.style.display = 'block';
        textarea.remove();
        editControls.remove();
        
        // Show all buttons again
        const actionButtons = messageContent.querySelectorAll('.message-actions .action-btn');
        actionButtons.forEach(btn => btn.style.display = 'flex');
    }
};

// Regenerate message function
window.regenerateMessage = function(button) {
    const messageDiv = button.closest('.message');
    const messageContent = button.closest('.message-content');
    const messageText = messageContent.querySelector('.message-text');
    const originalText = messageText.textContent;
    
    // Find the user message that prompted this response
    const messageIndex = Array.from(messageDiv.parentNode.children).indexOf(messageDiv);
    const userMessageDiv = messageDiv.parentNode.children[messageIndex - 1];
    
    if (!userMessageDiv || !userMessageDiv.classList.contains('user-message')) {
        showToast('Cannot find original query to regenerate.', 'error');
        return;
    }
    
    const userMessageText = userMessageDiv.querySelector('.message-text').textContent;
    
    // Show loading state
    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Regenerating...';
    button.disabled = true;
    
    // Remove current AI message from history
    const aiMessageIndex = conversationHistory.findIndex(msg => 
        msg.role === 'assistant' && msg.content === originalText
    );
    if (aiMessageIndex !== -1) {
        conversationHistory.splice(aiMessageIndex, 1);
    }
    
    // Remove from DOM
    messageDiv.remove();
    
    // Simulate regeneration
    const typingIndicatorId = addMessageToChat('', false, false, true);
    
    // Change send button to stop button
    const sendButton = document.getElementById('sendButton');
    if (sendButton) {
        sendButton.innerHTML = '<i class="fas fa-stop"></i> <span class="hide-on-mobile">Stop</span>';
        sendButton.onclick = stopResponse;
    }
    
    isGeneratingResponse = true;
    stopResponseFlag = false;
    
    // Simulate new response
    setTimeout(() => {
        const typingElement = document.getElementById(typingIndicatorId);
        if (typingElement) typingElement.remove();
        
        simulateRealisticResponse(userMessageText, typingIndicatorId, '');
    }, 1000);
};

// Rate message function with toggle functionality
window.rateMessage = function(button, type) {
    const messageContent = button.closest('.message-content');
    const likeBtn = messageContent.querySelector('.action-btn.like');
    const dislikeBtn = messageContent.querySelector('.action-btn.dislike');
    
    if (type === 'helpful') {
        if (likeBtn.classList.contains('active')) {
            // Unselect
            likeBtn.innerHTML = '<i class="far fa-thumbs-up"></i> <span class="hide-on-mobile">Helpful</span>';
            likeBtn.classList.remove('active');
            likeBtn.style.background = '';
            likeBtn.style.color = '';
            showToast('Helpful rating removed', 'info');
        } else {
            // Select helpful
            likeBtn.innerHTML = '<i class="fas fa-thumbs-up"></i> <span class="hide-on-mobile">Helpful</span>';
            likeBtn.classList.add('active');
            likeBtn.style.background = 'linear-gradient(135deg, var(--success) 0%, #059669 100%)';
            likeBtn.style.color = 'white';
            
            // Unselect not helpful if selected
            if (dislikeBtn.classList.contains('active')) {
                dislikeBtn.innerHTML = '<i class="far fa-thumbs-down"></i> <span class="hide-on-mobile">Not Helpful</span>';
                dislikeBtn.classList.remove('active');
                dislikeBtn.style.background = '';
                dislikeBtn.style.color = '';
            }
            
            showToast('Thank you for your feedback! 👍', 'success');
        }
    } else {
        if (dislikeBtn.classList.contains('active')) {
            // Unselect
            dislikeBtn.innerHTML = '<i class="far fa-thumbs-down"></i> <span class="hide-on-mobile">Not Helpful</span>';
            dislikeBtn.classList.remove('active');
            dislikeBtn.style.background = '';
            dislikeBtn.style.color = '';
            showToast('Not helpful rating removed', 'info');
        } else {
            // Select not helpful
            dislikeBtn.innerHTML = '<i class="fas fa-thumbs-down"></i> <span class="hide-on-mobile">Not Helpful</span>';
            dislikeBtn.classList.add('active');
            dislikeBtn.style.background = 'linear-gradient(135deg, var(--error) 0%, #dc2626 100%)';
            dislikeBtn.style.color = 'white';
            
            // Unselect helpful if selected
            if (likeBtn.classList.contains('active')) {
                likeBtn.innerHTML = '<i class="far fa-thumbs-up"></i> <span class="hide-on-mobile">Helpful</span>';
                likeBtn.classList.remove('active');
                likeBtn.style.background = '';
                likeBtn.style.color = '';
            }
            
            showToast('Feedback received. We\'ll improve! 👎', 'info');
        }
    }
};

// Share message function
window.shareMessage = function(button) {
    const messageContent = button.closest('.message-content');
    const messageText = messageContent.querySelector('.message-text');
    const textToShare = messageText.textContent;
    
    if (navigator.share) {
        navigator.share({
            title: 'LegalSwami AI Response',
            text: textToShare.substring(0, 100) + '...',
            url: window.location.href
        })
        .then(() => {
            button.innerHTML = '<i class="fas fa-check"></i> Shared!';
            setTimeout(() => {
                button.innerHTML = '<i class="fas fa-share"></i> Share';
            }, 2000);
        })
        .catch(console.error);
    } else {
        // Fallback for browsers that don't support Web Share API
        navigator.clipboard.writeText(textToShare.substring(0, 500))
            .then(() => {
                showToast('Response copied to clipboard for sharing! 📋', 'success');
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    button.innerHTML = '<i class="fas fa-share"></i> Share';
                }, 2000);
            })
            .catch(() => {
                showToast('Could not share message. Please copy manually.', 'error');
            });
    }
};

// Download message function
window.toggleDownloadDropdown = function(button) {
    const dropdown = button.nextElementSibling;
    dropdown.classList.toggle('show');
    
    // Close other dropdowns
    document.querySelectorAll('.download-options-menu').forEach(menu => {
        if (menu !== dropdown) {
            menu.classList.remove('show');
        }
    });
    
    // Close dropdown when clicking outside
    const closeDropdown = function(e) {
        if (!dropdown.contains(e.target) && e.target !== button) {
            dropdown.classList.remove('show');
            document.removeEventListener('click', closeDropdown);
        }
    };
    
    setTimeout(() => {
        document.addEventListener('click', closeDropdown);
    }, 10);
};

window.downloadMessage = function(button, format) {
    const messageContent = button.closest('.message').querySelector('.message-content');
    const messageText = messageContent.querySelector('.message-text');
    const textToDownload = messageText.textContent;
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const filename = `LegalSwami-Response-${timestamp}`;
    
    let content = `LEGALSWAMI AI RESPONSE\n`;
    content += `Generated: ${new Date().toLocaleString('en-IN')}\n`;
    content += `========================================\n\n`;
    content += textToDownload;
    content += `\n\n========================================\n`;
    content += `Disclaimer: This AI-generated information is for educational purposes only.\n`;
    content += `Not legal advice. Consult a qualified attorney for legal matters.\n`;
    content += `Generated by: LegalSwami (https://legalswami.com)\n`;
    
    if (format === 'word') {
        downloadAsDOC(content, filename);
    } else if (format === 'pdf') {
        try {
            downloadAsPDF(content, filename);
        } catch (error) {
            console.error('PDF generation error:', error);
            downloadAsTXT(content, filename);
            showToast('PDF generation failed. Text file downloaded instead.', 'warning');
        }
    } else if (format === 'text') {
        downloadAsTXT(content, filename);
    }
    
    // Close dropdown
    const dropdown = button.closest('.download-options-menu');
    dropdown.classList.remove('show');
    
    // Visual feedback
    const downloadBtn = dropdown.previousElementSibling;
    downloadBtn.innerHTML = '<i class="fas fa-check"></i> Downloaded!';
    setTimeout(() => {
        downloadBtn.innerHTML = '<i class="fas fa-download"></i> Download';
    }, 2000);
};

function downloadChat(format) {
    let content = `LEGALSWAMI - CHAT HISTORY\n`;
    content += `Generated: ${new Date().toLocaleString('en-IN')}\n`;
    content += `========================================\n\n`;
    
    conversationHistory.forEach((msg, index) => {
        const role = msg.role === 'user' ? 'YOU' : 'LEGALSWAMI AI';
        const time = msg.timestamp ? new Date(msg.timestamp).toLocaleTimeString('en-IN', { 
            hour: '2-digit', 
            minute: '2-digit' 
        }) : new Date().toLocaleTimeString('en-IN', { 
            hour: '2-digit', 
            minute: '2-digit' 
        });
        
        content += `${role} (${time}):\n`;
        content += '─'.repeat(50) + '\n';
        
        // Clean HTML tags and format text
        const cleanText = msg.content
            .replace(/<br>/g, '\n')
            .replace(/<\/?[^>]+(>|$)/g, '')
            .replace(/\*\*(.*?)\*\*/g, '$1')
            .replace(/\*([^*]+)\*/g, '$1')
            .replace(/`([^`]+)`/g, '$1')
            .replace(/#+/g, '')
            .replace(/⚠️/g, '[IMPORTANT]')
            .replace(/⚖️/g, '[LAW]')
            .replace(/🔍/g, '[NOTE]')
            .replace(/📚/g, '[REFERENCE]')
            .replace(/⚡/g, '[TIP]')
            .replace(/🔐/g, '[CONFIDENTIAL]')
            .replace(/💼/g, '[BUSINESS]')
            .replace(/🏠/g, '[PROPERTY]')
            .replace(/💰/g, '[FINANCIAL]');
        
        content += cleanText + '\n\n';
        content += '═'.repeat(60) + '\n\n';
    });
    
    content += `\n\nDISCLAIMER:\n`;
    content += `This chat history is generated by LegalSwami AI Legal Assistant.\n`;
    content += `The information provided is for educational purposes only and not legal advice.\n`;
    content += `Always consult with a qualified attorney for legal matters.\n`;
    content += `\nGenerated by: LegalSwami (https://legalswami.com)\n`;
    
    const fileName = `LegalSwami-Chat-${formatDateForFilename(new Date())}`;
    
    if (format === 'txt') {
        downloadAsTXT(content, fileName);
    } else if (format === 'pdf') {
        try {
            downloadAsPDF(content, fileName);
        } catch (error) {
            console.error('PDF generation error:', error);
            downloadAsTXT(content, fileName);
            showToast('PDF generation failed. Text file downloaded instead.', 'warning');
        }
    } else if (format === 'doc') {
        downloadAsDOC(content, fileName);
    }
}

function downloadAsTXT(content, filename) {
    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${filename}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    showToast('Text file downloaded successfully 📥', 'success');
}

function downloadAsPDF(content, filename) {
    try {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        
        // Set document properties
        doc.setProperties({
            title: 'LegalSwami Chat History',
            subject: 'AI Legal Assistant Conversation',
            author: 'LegalSwami AI',
            keywords: 'legal, ai, assistant, chat, history',
            creator: 'LegalSwami'
        });
        
        // Add header
        doc.setFontSize(16);
        doc.setFont('helvetica', 'bold');
        doc.setTextColor(30, 64, 175);
        doc.text('LEGALSWAMI - CHAT HISTORY', 105, 20, null, null, 'center');
        
        doc.setFontSize(10);
        doc.setFont('helvetica', 'normal');
        doc.setTextColor(100, 100, 100);
        doc.text(`Generated: ${new Date().toLocaleString()}`, 105, 28, null, null, 'center');
        
        // Add separator line
        doc.setDrawColor(212, 175, 55);
        doc.setLineWidth(0.5);
        doc.line(20, 32, 190, 32);
        
        // Prepare content
        doc.setFontSize(11);
        doc.setFont('helvetica', 'normal');
        doc.setTextColor(0, 0, 0);
        
        const lines = doc.splitTextToSize(content, 170);
        let yPos = 42;
        
        // Add content with pagination
        for (let i = 0; i < lines.length; i++) {
            if (yPos > 280) {
                doc.addPage();
                yPos = 20;
            }
            doc.text(lines[i], 20, yPos);
            yPos += 7;
        }
        
        // Add footer
        doc.setFontSize(9);
        doc.setTextColor(100, 100, 100);
        doc.text('Generated by LegalSwami AI Legal Assistant - https://legalswami.com', 105, 290, null, null, 'center');
        doc.text('Disclaimer: This is AI-generated information, not legal advice. Consult a qualified attorney.', 105, 295, null, null, 'center');
        
        // Save PDF
        doc.save(`${filename}.pdf`);
        showToast('PDF document downloaded successfully 📥', 'success');
    } catch (error) {
        console.error('PDF generation error:', error);
        throw error;
    }
}

function downloadAsDOC(content, filename) {
    const htmlContent = `
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>${filename}</title>
            <style>
                body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
                h1 { color: #1e40af; border-bottom: 2px solid #d4af37; padding-bottom: 10px; }
                .header { text-align: center; margin-bottom: 30px; }
                .message { margin-bottom: 20px; padding: 15px; border-left: 4px solid #d4af37; background: #f8fafc; }
                .user { border-left-color: #1e40af; }
                .ai { border-left-color: #059669; }
                .timestamp { color: #64748b; font-size: 0.9em; margin-bottom: 5px; }
                .disclaimer { margin-top: 40px; padding: 20px; background: #fef3c7; border: 1px solid #f59e0b; border-radius: 5px; }
            </style>
        </head>
        <body>
            <div class="header">
                <h1>LegalSwami Chat History</h1>
                <p>Generated on: ${new Date().toLocaleString()}</p>
            </div>
            
            <div class="content">
                <pre style="white-space: pre-wrap; font-family: 'Courier New', monospace;">${content.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>
            </div>
            
            <div class="disclaimer">
                <h3>Important Notice</h3>
                <p>This document contains AI-generated information from LegalSwami AI Legal Assistant. The content is provided for educational and informational purposes only and does not constitute legal advice. Always consult with a qualified attorney for legal matters specific to your situation.</p>
            </div>
        </body>
        </html>
    `;
    
    const blob = new Blob([htmlContent], { type: 'application/msword' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${filename}.doc`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    showToast('Word document downloaded successfully 📥', 'success');
}

function formatDateForFilename(date) {
    return date.toISOString()
        .replace(/[:\-]/g, '')
        .replace('T', '_')
        .split('.')[0];
}

// =============================================
// TOAST NOTIFICATION
// =============================================

function showToast(message, type = 'success') {
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toast-message');
    
    if (toast && toastMessage) {
        // Update toast content
        toastMessage.textContent = message;
        toast.className = `toast ${type} show`;
        
        // Update icon based on type
        const icon = toast.querySelector('i');
        if (icon) {
            switch(type) {
                case 'success': icon.className = 'fas fa-check-circle'; break;
                case 'error': icon.className = 'fas fa-exclamation-circle'; break;
                case 'warning': icon.className = 'fas fa-exclamation-triangle'; break;
                case 'info': icon.className = 'fas fa-info-circle'; break;
                default: icon.className = 'fas fa-check-circle';
            }
        }
        
        // Auto-hide after 3 seconds
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }
}

// =============================================
// GOOGLE LOGIN FUNCTIONALITY
// =============================================

function initializeGoogleLogin() {
    const googleLoginBtn = document.getElementById('googleLoginBtn');
    
    if (googleLoginBtn) {
        googleLoginBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Google OAuth configuration
            const clientId = '166511615962-bohur5q8d4i5hud6icr4185kcte9enk8.apps.googleusercontent.com';
            const redirectUri = window.location.origin + window.location.pathname;
            const scope = 'email profile';
            const state = 'legal_swami_login_' + Date.now();
            
            // Build OAuth URL
            const oauthUrl = 'https://accounts.google.com/o/oauth2/v2/auth?' +
                'client_id=' + encodeURIComponent(clientId) +
                '&redirect_uri=' + encodeURIComponent(redirectUri) +
                '&response_type=token' +
                '&scope=' + encodeURIComponent(scope) +
                '&state=' + encodeURIComponent(state) +
                '&prompt=select_account';
            
            // Open Google login in new window
            const width = 500;
            const height = 600;
            const left = (window.innerWidth - width) / 2;
            const top = (window.innerHeight - height) / 2;
            
            const loginWindow = window.open(
                oauthUrl,
                'Google Login',
                `width=${width},height=${height},top=${top},left=${left},resizable=yes,scrollbars=yes`
            );
            
            if (!loginWindow) {
                showToast('Please allow popups for Google login', 'warning');
                return;
            }
            
            // Check for OAuth response
            const checkOAuthResponse = setInterval(() => {
                try {
                    if (loginWindow.closed) {
                        clearInterval(checkOAuthResponse);
                        showToast('Login window closed', 'info');
                        return;
                    }
                    
                    // Check if URL contains access token
                    const hash = loginWindow.location.hash;
                    if (hash && hash.includes('access_token')) {
                        clearInterval(checkOAuthResponse);
                        
                        // Parse access token from hash
                        const params = new URLSearchParams(hash.substring(1));
                        const accessToken = params.get('access_token');
                        
                        if (accessToken) {
                            // Get user info from Google API
                            fetch('https://www.googleapis.com/oauth2/v3/userinfo', {
                                headers: {
                                    'Authorization': `Bearer ${accessToken}`
                                }
                            })
                            .then(response => response.json())
                            .then(userInfo => {
                                // Store user info
                                localStorage.setItem('legalSwamiUser', JSON.stringify({
                                    name: userInfo.name,
                                    email: userInfo.email,
                                    picture: userInfo.picture,
                                    loggedIn: true,
                                    loginTime: new Date().toISOString()
                                }));
                                
                                // Update UI
                                updateLoginUI(userInfo);
                                showToast(`Welcome ${userInfo.name}! Successfully logged in. 👋`, 'success');
                                
                                // Close login window
                                loginWindow.close();
                            })
                            .catch(error => {
                                console.error('Error fetching user info:', error);
                                showToast('Error fetching user information', 'error');
                            });
                        }
                    }
                } catch (error) {
                    // Cross-origin errors are expected, ignore them
                }
            }, 100);
            
            // Timeout after 2 minutes
            setTimeout(() => {
                clearInterval(checkOAuthResponse);
                if (!loginWindow.closed) {
                    loginWindow.close();
                    showToast('Login timeout. Please try again.', 'warning');
                }
            }, 120000);
        });
    }
    
    // Check for existing login
    const savedUser = localStorage.getItem('legalSwamiUser');
    if (savedUser) {
        try {
            const userInfo = JSON.parse(savedUser);
            if (userInfo.loggedIn) {
                updateLoginUI(userInfo);
            }
        } catch (error) {
            console.error('Error parsing saved user:', error);
        }
    }
}

function updateLoginUI(userInfo) {
    const googleLoginBtn = document.getElementById('googleLoginBtn');
    if (!googleLoginBtn || !userInfo) return;
    
    // Update button to show user info
    googleLoginBtn.innerHTML = `
        <img src="${userInfo.picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(userInfo.name) + '&background=random'}" 
             style="width: 20px; height: 20px; border-radius: 50%; margin-right: 8px;">
        <span>${userInfo.name.split(' ')[0]}</span>
    `;
    
    // Update tooltip
    googleLoginBtn.title = `Logged in as ${userInfo.name}\n${userInfo.email}`;
    
    // Change click behavior to show profile menu
    googleLoginBtn.onclick = function(e) {
        e.preventDefault();
        showProfileMenu(userInfo);
    };
}

function showProfileMenu(userInfo) {
    // Create profile menu
    const profileMenu = document.createElement('div');
    profileMenu.className = 'profile-menu';
    profileMenu.style.cssText = `
        position: absolute;
        top: 60px;
        right: 20px;
        background: var(--dark-surface);
        border: 2px solid var(--court-gold);
        border-radius: 12px;
        padding: 1rem;
        min-width: 200px;
        z-index: 1000;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
    `;
    
    profileMenu.innerHTML = `
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <img src="${userInfo.picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(userInfo.name) + '&background=random'}" 
                 style="width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--court-gold);">
            <div>
                <div style="font-weight: 600; color: var(--dark-text);">${userInfo.name}</div>
                <div style="font-size: 0.75rem; color: var(--dark-text-secondary);">${userInfo.email}</div>
            </div>
        </div>
        <button class="profile-menu-btn" style="display: flex; align-items: center; gap: 10px; width: 100%; padding: 0.75rem; background: rgba(30, 64, 175, 0.1); border: 1px solid rgba(30, 64, 175, 0.2); border-radius: 8px; color: var(--dark-text); cursor: pointer; transition: all 0.3s; margin-bottom: 0.5rem;" onmouseover="this.style.background='rgba(30, 64, 175, 0.2)'; this.style.transform='translateX(5px)'" onmouseout="this.style.background='rgba(30, 64, 175, 0.1)'; this.style.transform='translateX(0)'">
            <i class="fas fa-user"></i>
            <span>My Profile</span>
        </button>
        <button class="profile-menu-btn" style="display: flex; align-items: center; gap: 10px; width: 100%; padding: 0.75rem; background: rgba(30, 64, 175, 0.1); border: 1px solid rgba(30, 64, 175, 0.2); border-radius: 8px; color: var(--dark-text); cursor: pointer; transition: all 0.3s; margin-bottom: 0.5rem;" onmouseover="this.style.background='rgba(30, 64, 175, 0.2)'; this.style.transform='translateX(5px)'" onmouseout="this.style.background='rgba(30, 64, 175, 0.1)'; this.style.transform='translateX(0)'">
            <i class="fas fa-history"></i>
            <span>Chat History</span>
        </button>
        <button class="profile-menu-btn" style="display: flex; align-items: center; gap: 10px; width: 100%; padding: 0.75rem; background: rgba(212, 175, 55, 0.1); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 8px; color: var(--dark-text); cursor: pointer; transition: all 0.3s;" id="logoutBtn">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </button>
    `;
    
    document.body.appendChild(profileMenu);
    
    // Add logout functionality
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
        logoutBtn.onclick = function() {
            localStorage.removeItem('legalSwamiUser');
            location.reload(); // Reload to reset UI
        };
    }
    
    // Close menu when clicking outside
    const closeMenu = function(e) {
        if (!profileMenu.contains(e.target) && e.target.id !== 'googleLoginBtn') {
            profileMenu.remove();
            document.removeEventListener('click', closeMenu);
        }
    };
    
    setTimeout(() => {
        document.addEventListener('click', closeMenu);
    }, 100);
}

// =============================================
// LAWYER SEARCH & FILTER FUNCTIONS
// =============================================

function initializeLawyerSearch() {
    const lawyerSearchInput = document.getElementById('lawyerSearch');
    const lawyerSearchBtn = document.getElementById('lawyerSearchBtn');
    const filterButtons = document.querySelectorAll('.filter-btn');
    const lawyerCards = document.querySelectorAll('.lawyer-card');
    
    // Search function
    function performSearch() {
        const searchTerm = lawyerSearchInput.value.toLowerCase().trim();
        const activeFilter = document.querySelector('.filter-btn.active').dataset.specialization;
        
        lawyerCards.forEach(card => {
            const name = card.querySelector('.lawyer-name').textContent.toLowerCase();
            const specialization = card.querySelector('.lawyer-specialization').textContent.toLowerCase();
            const experience = card.querySelector('.lawyer-experience').textContent.toLowerCase();
            const cardSpecialization = card.dataset.specialization;
            
            // Check if matches search term
            const matchesSearch = searchTerm === '' || 
                                   name.includes(searchTerm) || 
                                   specialization.includes(searchTerm) || 
                                   experience.includes(searchTerm);
            
            // Check if matches filter
            const matchesFilter = activeFilter === 'all' || 
                                   cardSpecialization === activeFilter;
            
            // Show/hide based on both conditions
            if (matchesSearch && matchesFilter) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
        
        if (searchTerm !== '') {
            showToast(`Search results for: "${searchTerm}" 🔍`, 'info');
        }
    }
    
    // Event listeners
    if (lawyerSearchBtn) {
        lawyerSearchBtn.addEventListener('click', performSearch);
    }
    
    if (lawyerSearchInput) {
        lawyerSearchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
        
        // Clear search on input
        lawyerSearchInput.addEventListener('input', function() {
            if (this.value === '') {
                performSearch();
            }
        });
    }
    
    // Filter buttons
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remove active class from all buttons
            filterButtons.forEach(btn => btn.classList.remove('active'));
            
            // Add active class to clicked button
            this.classList.add('active');
            
            // Perform search with new filter
            performSearch();
            
            // Show toast notification
            const specialization = this.dataset.specialization;
            const filterName = this.textContent;
            showToast(`Filtering by: ${filterName} 👨‍⚖️`, 'info');
        });
    });
    
    console.log("✅ Lawyer search and filter initialized");
}

// =============================================
// EVENT LISTENERS SETUP
// =============================================

document.addEventListener('DOMContentLoaded', function() {
    console.log('🚀 LegalSwami AI Legal Assistant Initialized');
    
    // Initialize Google Login
    initializeGoogleLogin();
    
    // Start chat buttons
    const startChatBtn = document.getElementById('startChatBtn');
    if (startChatBtn) {
        startChatBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            openChat();
        });
    }

    const ctaStartChat = document.getElementById('ctaStartChat');
    if (ctaStartChat) {
        ctaStartChat.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            openChat();
        });
    }

    const mobileStartChat = document.getElementById('mobileStartChat');
    if (mobileStartChat) {
        mobileStartChat.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            openChat();
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenu) mobileMenu.style.display = 'none';
        });
    }

    // Hero assistant button
    const heroAssistantBtn = document.getElementById('heroAssistantBtn');
    if (heroAssistantBtn) {
        heroAssistantBtn.addEventListener('click', openChat);
    }

    // Document generation buttons
    document.querySelectorAll('.btn-generate, .btn-database, .btn-guide, .btn-consult').forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            openChat();
        });
    });

    // Watch demo button
    const watchDemo = document.getElementById('watchDemo');
    if (watchDemo) {
        watchDemo.addEventListener('click', function(e) {
            e.preventDefault();
            showToast('Demo video feature coming soon! 🎬', 'info');
        });
    }

    // Schedule demo button
    const ctaScheduleDemo = document.getElementById('ctaScheduleDemo');
    if (ctaScheduleDemo) {
        ctaScheduleDemo.addEventListener('click', function(e) {
            e.preventDefault();
            showToast('Schedule demo feature coming soon! 📅', 'info');
        });
    }

    // Mobile menu toggle
    const mobileToggle = document.getElementById('mobileToggle');
    const mobileMenu = document.getElementById('mobileMenu');
    const mobileClose = document.getElementById('mobileClose');
    
    if (mobileToggle && mobileMenu) {
        mobileToggle.addEventListener('click', function() {
            mobileMenu.style.display = 'block';
            setTimeout(() => {
                mobileMenu.style.opacity = '1';
            }, 10);
        });
    }
    
    if (mobileClose && mobileMenu) {
        mobileClose.addEventListener('click', function() {
            mobileMenu.style.opacity = '0';
            setTimeout(() => {
                mobileMenu.style.display = 'none';
            }, 300);
        });
    }

    // Initialize app for guest
    setTimeout(() => {
        initializeAppForGuest();
        initializeLawyerSearch(); // Initialize lawyer search
        
        // Hide loading screen
        const loadingScreen = document.getElementById('loadingScreen');
        if (loadingScreen) {
            loadingScreen.style.opacity = '0';
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 300);
        }
    }, 1500);

    // Back to top button
    const backToTopBtn = document.getElementById('backToTop');
    if (backToTopBtn) {
        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopBtn.style.display = 'flex';
            } else {
                backToTopBtn.style.display = 'none';
            }
        });
    }

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href === '#' || href === '#chat') return;
            
            e.preventDefault();
            const targetId = href;
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 80,
                    behavior: 'smooth'
                });
                
                // Update active nav link
                document.querySelectorAll('.nav-link, .mobile-link').forEach(link => {
                    link.classList.remove('active');
                });
                this.classList.add('active');
                
                // Close mobile menu if open
                const mobileMenu = document.getElementById('mobileMenu');
                if (mobileMenu && mobileMenu.style.display === 'block') {
                    mobileMenu.style.opacity = '0';
                    setTimeout(() => {
                        mobileMenu.style.display = 'none';
                    }, 300);
                }
            }
        });
    });

    // Handle escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            // Close chat if open
            if (document.body.classList.contains('chat-active')) {
                closeChat();
            }
            
            // Close mobile menu
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenu && mobileMenu.style.display === 'block') {
                mobileMenu.style.opacity = '0';
                setTimeout(() => {
                    mobileMenu.style.display = 'none';
                }, 300);
            }
            
            // Close sidebar
            const sidebar = document.getElementById('sidebar');
            if (sidebar && sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
            }
            
            // Close download modal
            const downloadModal = document.getElementById('downloadModal');
            if (downloadModal && downloadModal.classList.contains('active')) {
                downloadModal.classList.remove('active');
            }
            
            // Close dropdowns
            document.querySelectorAll('.download-options-menu').forEach(dropdown => {
                dropdown.classList.remove('show');
            });
            
            // Stop response if generating
            if (isGeneratingResponse) {
                stopResponse();
            }
        }
    });

    // Handle clicks outside sidebar on mobile
    document.addEventListener('click', function(e) {
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        
        if (sidebar && sidebar.classList.contains('active') && 
            window.innerWidth <= 992 && 
            !sidebar.contains(e.target) && 
            (!sidebarToggle || !sidebarToggle.contains(e.target))) {
            sidebar.classList.remove('active');
        }
    });

    // Close dropdowns when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.download-dropdown')) {
            document.querySelectorAll('.download-options-menu').forEach(dropdown => {
                dropdown.classList.remove('show');
            });
        }
    });

    console.log('✅ App ready to use');
});
    </script>
</body>
</html>
